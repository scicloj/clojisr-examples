<!DOCTYPE html>
<html><html><head><script language="JavaScript">
  socket= new WebSocket('ws://localhost:5678/watch-reload');
  socket.onopen= function() {
                           socket.send ('watch') ;
                           };
  socket.onmessage= function(s) {
                               if                                                          ( s.data == 'started') {
                                                                                                                   console.log ("Watching started") ;
                                                                                                                   }                                 else                   if ( s.data == 'reload') {
                                                                                                                                                                                                      console.log            ("reloading") ;
                                                                                                                                                                                                      window.location.reload ()            ;
                                                                                                                                                                                                      } else                   {
                                                                                                                                                                                                                                alert('Don\'t know what to do with [' + s.data + ']');
                                                                                                                                                                                                                                }
                               };
  </script>
  <style type="text/css">body {
    background-image: linear-gradient(0deg, #fff4e8 25%, #fef8e9 25%, #fef8e9 50%, #fff4e8 50%, #fff4e8 75%, #fef8e9 75%, #fef8e9 100%);
    background-size: 32.00px 32.00px;
    color: #3e3c3f;
    font-family: "Source Sans Pro", sans-serif;
    font-size: 14px;
    padding-left: 10px;
    padding-right: 10px;
    margin: 0;
}

.nspin {
    border-radius: 10px;
    background: #d7d2c3;
    padding: 10px;
    margin-bottom: 5px;
}

.nspout {
    border-radius: 10px;
    background: #e4ded0;
    padding: 10px;
    margin-left: 10px;
}

.nspbox {
    padding-bottom: 5px;
    margin: 0;
}

.FAILED { color: #bb0000; }
.PASSED { color: #009500; }

p {
    margin-top: 0;
    margin-bottom: 5px; }

h1, h2, h3, h4, h5, h6 {
    margin-top: 10px;
    margin-bottom: 5px;
    color: #720000;
}

a:visited { color: #5E5E59; }
a:link { color: #720000; }
tr:nth-child(even) { background-color: #e4ded0; }
th { background-color: #d7d2c3; }

</style><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/lang-clj.js" type="text/javascript"></script><link href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" /><script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script><script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" type="text/javascript"></script><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" type="text/css" /></head><body><div><h1>clojisr-examples.lattice</h1><div><i><small><a href="https://github.com/scicloj/clojisr-examples/tree/master/src/clojisr_examples/lattice.clj">clojisr-examples.lattice</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Sun Apr 12 21:50:49 CEST 2020.</small></i><hr /></div><div>Table of contents<ul><li><a href="#Setup">Setup</a></li><li><a href="#Chapter-1">Chapter-1</a></li><li><a href="#Chapter-2">Chapter-2</a></li><li><a href="#Chapter-3">Chapter-3</a></li><li><a href="#Chapter-4">Chapter-4</a></li><li><a href="#Chapter-5">Chapter-5</a></li><li><a href="#Chapter-6">Chapter-6</a></li><li><a href="#Chapter-7">Chapter-7</a></li><li><a href="#Chapter-8">Chapter-8</a></li><li><a href="#Chapter-9">Chapter-9</a></li><li><a href="#Chapter-10">Chapter-10</a></li><li><a href="#Chapter-11">Chapter-11</a></li><li><a href="#Chapter-12-skipped">Chapter-12-skipped</a></li><li><a href="#Chapter-13">Chapter-13</a></li><li><a href="#Chapter-14">Chapter-14</a></li></ul><hr /></div><div class="nspbox"><div><h1>Lattice</h1></div></div><div class="nspbox"><div><p>Examples from the Lattice book <a href='http://lmdvr.r-forge.r-project.org/figures/figures.html'>page</a></p></div></div><div class="nspbox"><div><p>Please be sure to install following packages.</p></div></div><div class="nspbox"><div><pre><code class="r">install.packages&#40;c&#40;'latticeExtra', 'copula', 'ellipse', 'gridBase',
                   'locfit', 'logspline', 'mapproj', 'maps', 'MEMSS',
                   'mlmRev', 'RColorBrewer', 'grid'&#41;&#41;
source&#40;'http://bioconductor.org/biocLite.R'&#41;
biocLite&#40;c&#40;'flowCore', 'flowViz', 'hexbin'&#41;&#41;
</code></pre></div></div><div class="nspbox"><a id="Setup"> </a><div><h2>Setup</h2></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require&nbsp;'[clojisr.v1.r&nbsp;:as&nbsp;r&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[r+&nbsp;r&nbsp;r->clj&nbsp;clj->r&nbsp;clj->java&nbsp;java->clj&nbsp;java->r&nbsp;r->java]]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[clojisr.v1.require&nbsp;:refer&nbsp;[require-r]]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[clojisr.v1.applications.plotting&nbsp;:refer&nbsp;[plot->file]])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r/discard-all-sessions)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(require-r&nbsp;'[lattice&nbsp;:as&nbsp;lat]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[latticeExtra&nbsp;:as&nbsp;late]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[stats&nbsp;:as&nbsp;stats]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[mlmRev]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[MEMSS]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[MASS]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[grDevices&nbsp;:as&nbsp;dev]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[graphics&nbsp;:as&nbsp;g]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[base&nbsp;:refer&nbsp;[$&nbsp;$<-&nbsp;<-&nbsp;summary]&nbsp;:as&nbsp;base]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[utils]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[grid]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[locfit]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[hexbin]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[maps]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[mapproj]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[copula]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[logspline]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[RColorBrewer]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[flowViz]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[flowCore]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[datasets&nbsp;:refer&nbsp;:all])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;r.base/version)</code></div><div class="nspout"><code class="prettyprint lang-clj">{:platform&nbsp;["x86_64-pc-linux-gnu"],</br>&nbsp;:arch&nbsp;["x86_64"],</br>&nbsp;:os&nbsp;["linux-gnu"],</br>&nbsp;:system&nbsp;["x86_64,&nbsp;linux-gnu"],</br>&nbsp;:status&nbsp;[""],</br>&nbsp;:major&nbsp;["3"],</br>&nbsp;:minor&nbsp;["6.3"],</br>&nbsp;:year&nbsp;["2020"],</br>&nbsp;:month&nbsp;["02"],</br>&nbsp;:day&nbsp;["29"],</br>&nbsp;:svn&nbsp;rev&nbsp;["77875"],</br>&nbsp;:language&nbsp;["R"],</br>&nbsp;:version.string&nbsp;["R&nbsp;version&nbsp;3.6.3&nbsp;(2020-02-29)"],</br>&nbsp;:nickname&nbsp;["Holding&nbsp;the&nbsp;Windsock"]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r.base/set-seed&nbsp;2020)</code></div></div><div class="nspbox"><a id="Chapter-1"> </a><div><h2>Chapter 1</h2></div></div><div class="nspbox"><div><h3>Figure 1.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(stats/xtabs&nbsp;'(formula&nbsp;nil&nbsp;score)&nbsp;:data&nbsp;r.mlmRev/Chem97))</code></div><div class="nspout"><code class="prettyprint lang-clj">[3688&nbsp;3627&nbsp;4619&nbsp;5739&nbsp;6668&nbsp;6681]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"1.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/histogram&nbsp;:data&nbsp;r.mlmRev/Chem97)))</code></div></div><div class="nspbox"><image src="1.1.png"></image></div><div class="nspbox"><div><h3>Figure 1.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"1.2.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.points&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ref&nbsp;true)))</code></div></div><div class="nspbox"><image src="1.2.png"></image></div><div class="nspbox"><div><h3>Figure 1.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"1.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;gcsescore)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'score</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.points&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ref&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;3})))</code></div></div><div class="nspbox"><image src="1.3.png"></image></div><div class="nspbox"><div><h3>Figure 1.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;tp1</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/histogram&nbsp;:data&nbsp;r.mlmRev/Chem97)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;tp2</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;gcsescore)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'score</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.points&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"right",&nbsp;:title&nbsp;"score"})))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/class&nbsp;tp2)</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;"trellis"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(base/summary&nbsp;tp1))</code></div><div class="nspout"><code class="prettyprint lang-clj">{:call</br>&nbsp;[histogram</br>&nbsp;&nbsp;[(&nbsp;[~&nbsp;[|&nbsp;gcsescore&nbsp;[factor&nbsp;score]]]]</br>&nbsp;&nbsp;[$&nbsp;.MEM&nbsp;xf3c18fc581b2411e]],</br>&nbsp;:packet.sizes&nbsp;[3688.0&nbsp;3627.0&nbsp;4619.0&nbsp;5739.0&nbsp;6668.0&nbsp;6681.0],</br>&nbsp;:index.cond&nbsp;[[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5&nbsp;6]],</br>&nbsp;:perm.cond&nbsp;[1]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"1.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;tp1&nbsp;:split&nbsp;[1&nbsp;1&nbsp;1&nbsp;2])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;tp2&nbsp;:split&nbsp;[1&nbsp;2&nbsp;1&nbsp;2]&nbsp;:newpage&nbsp;false)))</code></div></div><div class="nspbox"><image src="1.4.png"></image></div><div class="nspbox"><a id="Chapter-2"> </a><div><h2>Chapter 2</h2></div></div><div class="nspbox"><div><h3>Figure 2.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;tp1-oats</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;yield&nbsp;(|&nbsp;nitro&nbsp;(+&nbsp;Variety&nbsp;Block)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Oats&nbsp;:type&nbsp;"o")))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.1.png")&nbsp;#(base/print&nbsp;tp1-oats))</code></div></div><div class="nspbox"><image src="2.1.png"></image></div><div class="nspbox"><div><h3>Figure 2.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/dim&nbsp;tp1-oats)</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;3&nbsp;6</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(base/dimnames&nbsp;tp1-oats))</code></div><div class="nspout"><code class="prettyprint lang-clj">{:Variety&nbsp;["Golden&nbsp;Rain"&nbsp;"Marvellous"&nbsp;"Victory"],</br>&nbsp;:Block&nbsp;["I"&nbsp;"II"&nbsp;"III"&nbsp;"IV"&nbsp;"V"&nbsp;"VI"]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(stats/xtabs&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;Variety&nbsp;Block))&nbsp;:data&nbsp;r.MEMSS/Oats)</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Block</br>Variety&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I&nbsp;II&nbsp;III&nbsp;IV&nbsp;V&nbsp;VI</br>&nbsp;&nbsp;Golden&nbsp;Rain&nbsp;4&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;4&nbsp;4&nbsp;&nbsp;4</br>&nbsp;&nbsp;Marvellous&nbsp;&nbsp;4&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;4&nbsp;4&nbsp;&nbsp;4</br>&nbsp;&nbsp;Victory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;4&nbsp;4&nbsp;&nbsp;4</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(base/summary&nbsp;tp1-oats))</code></div><div class="nspout"><code class="prettyprint lang-clj">{:call</br>&nbsp;[xyplot</br>&nbsp;&nbsp;[(&nbsp;[~&nbsp;yield&nbsp;[|&nbsp;nitro&nbsp;[+&nbsp;Variety&nbsp;Block]]]]</br>&nbsp;&nbsp;[$&nbsp;.MEM&nbsp;xdb96e7b1666e4d1a]</br>&nbsp;&nbsp;["o"]],</br>&nbsp;:packet.sizes</br>&nbsp;[4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0],</br>&nbsp;:index.cond&nbsp;[[1&nbsp;2&nbsp;3]&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5&nbsp;6]],</br>&nbsp;:perm.cond&nbsp;[1&nbsp;2]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(base/summary&nbsp;(r/bra&nbsp;tp1-oats&nbsp;nil&nbsp;1)))</code></div><div class="nspout"><code class="prettyprint lang-clj">{:call</br>&nbsp;[xyplot</br>&nbsp;&nbsp;[(&nbsp;[~&nbsp;yield&nbsp;[|&nbsp;nitro&nbsp;[+&nbsp;Variety&nbsp;Block]]]]</br>&nbsp;&nbsp;[$&nbsp;.MEM&nbsp;xdb96e7b1666e4d1a]</br>&nbsp;&nbsp;["o"]</br>&nbsp;&nbsp;new.levs],</br>&nbsp;:packet.sizes</br>&nbsp;[4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0</br>&nbsp;&nbsp;4.0],</br>&nbsp;:index.cond&nbsp;[[1&nbsp;2&nbsp;3]&nbsp;[1]],</br>&nbsp;:perm.cond&nbsp;[1&nbsp;2]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.2.png")&nbsp;(r/bra&nbsp;tp1-oats&nbsp;nil&nbsp;1))</code></div></div><div class="nspbox"><image src="2.2.png"></image></div><div class="nspbox"><div><h3>Figure 2.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update&nbsp;tp1-oats&nbsp;:aspect&nbsp;"xy"))</code></div></div><div class="nspbox"><image src="2.3.png"></image></div><div class="nspbox"><div><h3>Figure 2.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update&nbsp;tp1-oats&nbsp;:aspect&nbsp;"xy"&nbsp;:layout&nbsp;[0&nbsp;18]))</code></div></div><div class="nspbox"><image src="2.4.png"></image></div><div class="nspbox"><div><h3>Figure 2.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update&nbsp;tp1-oats</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[0&nbsp;18]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:between&nbsp;{:x&nbsp;[0&nbsp;0&nbsp;0.5],&nbsp;:y&nbsp;0.5}))</code></div></div><div class="nspbox"><image src="2.5.png"></image></div><div class="nspbox"><div><h3>Figure 2.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.6.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;variety&nbsp;(|&nbsp;yield&nbsp;site))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;lat/barley</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;6]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"right"})))</code></div></div><div class="nspbox"><image src="2.6.png"></image></div><div class="nspbox"><div><h3>Figure 2.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;key-variety</br>&nbsp;&nbsp;&nbsp;{:space&nbsp;"right",</br>&nbsp;&nbsp;&nbsp;&nbsp;:text&nbsp;'[:!list&nbsp;(levels&nbsp;($&nbsp;r.MEMSS/Oats&nbsp;Variety))],</br>&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;{:pch&nbsp;(range&nbsp;1&nbsp;3),&nbsp;:col&nbsp;"black"}})</code></div><div class="nspout"><code class="prettyprint lang-clj">{:space&nbsp;"right",</br>&nbsp;:text&nbsp;[:!list&nbsp;(levels&nbsp;($&nbsp;r.MEMSS/Oats&nbsp;Variety))],</br>&nbsp;:points&nbsp;{:pch&nbsp;(1&nbsp;2),&nbsp;:col&nbsp;"black"}}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"2.7.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;yield&nbsp;(|&nbsp;nitro&nbsp;Block))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;r.MEMSS/Oats</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"o"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Variety</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;key-variety</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;(range&nbsp;1&nbsp;3)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.line&nbsp;"darkgrey"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.symbol&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Nitrogen&nbsp;concentration&nbsp;(cwt/acre)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Yield&nbsp;(bushels/acre)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Yield&nbsp;of&nbsp;three&nbsp;varieties&nbsp;of&nbsp;oats"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:sub&nbsp;"A&nbsp;3&nbsp;x&nbsp;4&nbsp;split&nbsp;plot&nbsp;experiment&nbsp;with&nbsp;6&nbsp;blocks")))</code></div></div><div class="nspbox"><image src="2.7.png"></image></div><div class="nspbox"><div><h3>Figure 2.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"2.8.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Class&nbsp;(|&nbsp;Freq&nbsp;(+&nbsp;Sex&nbsp;Age)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;:data&nbsp;(base/as-data-frame&nbsp;Titanic)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Survived</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stack&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[4&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:title&nbsp;"Survived",&nbsp;:columns&nbsp;2})))</code></div></div><div class="nspbox"><image src="2.8.png"></image></div><div class="nspbox"><div><h3>Figure 2.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.9.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Class&nbsp;(|&nbsp;Freq&nbsp;(+&nbsp;Sex&nbsp;Age)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;:data&nbsp;(base/as-data-frame&nbsp;Titanic)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Survived</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stack&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[4&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:title&nbsp;"Survived",&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;"free"})))</code></div></div><div class="nspbox"><image src="2.9.png"></image></div><div class="nspbox"><div><h3>Figure 2.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;bc-titanic</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Class&nbsp;(|&nbsp;Freq&nbsp;(+&nbsp;Sex&nbsp;Age)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;:data&nbsp;(base/as-data-frame&nbsp;Titanic)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Survived</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stack&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[4&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:title&nbsp;"Survived",&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;"free"})))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"2.10.png")</br>&nbsp;&nbsp;&nbsp;(stats/update</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bc-titanic</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[...]&nbsp;(panel.grid&nbsp;:h&nbsp;0&nbsp;:v&nbsp;-1)&nbsp;(panel.barchart&nbsp;...))))</code></div></div><div class="nspbox"><image src="2.10.png"></image></div><div class="nspbox"><div><h3>Figure 2.11</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"2.11.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bc-titanic</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[...&nbsp;border]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.barchart&nbsp;...&nbsp;:border&nbsp;"transparent"))))</code></div></div><div class="nspbox"><image src="2.11.png"></image></div><div class="nspbox"><a id="Chapter-3"> </a><div><h2>Chapter 3</h2></div></div><div class="nspbox"><div><h3>Figure 3.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;eruptions)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;faithful)))</code></div></div><div class="nspbox"><image src="3.1.png"></image></div><div class="nspbox"><div><h3>Figure 3.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.2.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;eruptions)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;faithful</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kernel&nbsp;"rect"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:bw&nbsp;0.2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.points&nbsp;"rug"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:n&nbsp;200)))</code></div></div><div class="nspbox"><image src="3.2.png"></image></div><div class="nspbox"><div><h3>Figure 3.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;(log&nbsp;FSC.H)&nbsp;Days))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.points&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ref&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[2&nbsp;4])))</code></div></div><div class="nspbox"><image src="3.3.png"></image></div><div class="nspbox"><div><h3>Figure 3.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;(log2&nbsp;FSC.H)&nbsp;Days))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/histogram&nbsp;:data&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"log&nbsp;Forward&nbsp;Scatter"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"density"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:nint&nbsp;50</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[2&nbsp;4])))</code></div></div><div class="nspbox"><image src="3.4.png"></image></div><div class="nspbox"><div><h3>Figure 3.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100))))</code></div></div><div class="nspbox"><image src="3.5.png"></image></div><div class="nspbox"><div><h3>Figure 3.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.6.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'score</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"right"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Standard&nbsp;Normal&nbsp;Quantiles"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.6.png"></image></div><div class="nspbox"><div><h3>Figure 3.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;chem97-mod</br>&nbsp;&nbsp;&nbsp;(base/transform&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gcsescore.trans</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(**&nbsp;gcsescore&nbsp;2.34)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.7.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore.trans&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;chem97-mod</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'score</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"right",&nbsp;:title&nbsp;"score"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Standard&nbsp;Normal&nbsp;Quantiles"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Transformed&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.7.png"></image></div><div class="nspbox"><div><h3>Figure 3.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.8.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(late/ecdfplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'gender</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(>&nbsp;gcsescore&nbsp;0)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.8.png"></image></div><div class="nspbox"><div><h3>Figure 3.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"3.9.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'gender</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;2,&nbsp;:points&nbsp;false,&nbsp;:lines&nbsp;true}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"l"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:distribution&nbsp;'qunif</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;'prepanel.qqmathline</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(>&nbsp;gcsescore&nbsp;0)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Standard&nbsp;Normal&nbsp;Quantiles"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.9.png"></image></div><div class="nspbox"><div><h3>Figure 3.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.10.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;gender&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qq&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;1)))</code></div></div><div class="nspbox"><image src="3.10.png"></image></div><div class="nspbox"><div><h3>Figure 3.11</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.11.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(factor&nbsp;score)&nbsp;(|&nbsp;gcsescore&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.11.png"></image></div><div class="nspbox"><div><h3>Figure 3.12</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"3.12.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(**&nbsp;gcsescore&nbsp;2.34)&nbsp;(|&nbsp;gender&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;:data&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:varwidth&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[6&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="3.12.png"></image></div><div class="nspbox"><div><h3>Figure 3.13</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.13.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Days&nbsp;(log&nbsp;FSC.H))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;:data&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"log(Forward&nbsp;Scatter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Days&nbsp;Past&nbsp;Transplant")))</code></div></div><div class="nspbox"><image src="3.13.png"></image></div><div class="nspbox"><div><h3>Figure 3.14</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.14.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Days&nbsp;(log&nbsp;FSC.H))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;:data&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'panel.violin</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:box.ratio&nbsp;3</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"log(Forward&nbsp;Scatter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Days&nbsp;Past&nbsp;Transplant")))</code></div></div><div class="nspbox"><image src="3.14.png"></image></div><div class="nspbox"><div><h3>Figure 3.15</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.15.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(factor&nbsp;mag)&nbsp;depth)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/stripplot&nbsp;quakes)))</code></div></div><div class="nspbox"><image src="3.15.png"></image></div><div class="nspbox"><div><h3>Figure 3.16</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"3.16.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;depth&nbsp;(factor&nbsp;mag))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/stripplot&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:jitter.data&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:alpha&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Depth&nbsp;(km)")))</code></div></div><div class="nspbox"><image src="3.16.png"></image></div><div class="nspbox"><div><h3>Figure 3.17</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"3.17.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;(sqrt&nbsp;(abs&nbsp;(residuals&nbsp;(lm&nbsp;(formula</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;variety&nbsp;year&nbsp;site))))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;site)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/stripplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data&nbsp;lat/barley</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:jitter.data&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;true,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"a"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fun&nbsp;'median</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;(r&nbsp;"expression(abs('Residual&nbsp;Barley&nbsp;Yield')^{1&nbsp;/&nbsp;2})"))))</code></div></div><div class="nspbox"><image src="3.17.png"></image></div><div class="nspbox"><a id="Chapter-4"> </a><div><h2>Chapter 4</h2></div></div><div class="nspbox"><div><h3>Figure 4.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">VADeaths</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rural&nbsp;Male&nbsp;Rural&nbsp;Female&nbsp;Urban&nbsp;Male&nbsp;Urban&nbsp;Female</br>50-54&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.4</br>55-59&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11.7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;24.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13.6</br>60-64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;26.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;37.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19.3</br>65-69&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;41.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30.9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;54.6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;35.1</br>70-74&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;66.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;54.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;71.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;50.0</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/class&nbsp;VADeaths)</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;"matrix"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(r.utils/methods&nbsp;"dotplot"))</code></div><div class="nspout"><code class="prettyprint lang-clj">["dotplot.array"</br>&nbsp;"dotplot.coef.mer"</br>&nbsp;"dotplot.default"</br>&nbsp;"dotplot.formula"</br>&nbsp;"dotplot.matrix"</br>&nbsp;"dotplot.numeric"</br>&nbsp;"dotplot.ranef.mer"</br>&nbsp;"dotplot.table"]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;VADeaths&nbsp;:groups&nbsp;false))</code></div></div><div class="nspbox"><image src="4.1.png"></image></div><div class="nspbox"><div><h3>Figure 4.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.2.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;VADeaths</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;4]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:origin&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"h"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Death&nbsp;Rates&nbsp;in&nbsp;Virginia&nbsp;-&nbsp;1940"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Rate&nbsp;(per&nbsp;1000)"))</code></div></div><div class="nspbox"><image src="4.2.png"></image></div><div class="nspbox"><div><h3>Figure 4.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;VADeaths</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"o"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:lines&nbsp;true,&nbsp;:space&nbsp;"right"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Death&nbsp;Rates&nbsp;in&nbsp;Virginia&nbsp;-&nbsp;1940"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Rate&nbsp;(per&nbsp;1000)"))</code></div></div><div class="nspbox"><image src="4.3.png"></image></div><div class="nspbox"><div><h3>Figure 4.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;VADeaths</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;4]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:reference&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Death&nbsp;Rates&nbsp;in&nbsp;Virginia&nbsp;-&nbsp;1940"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Rate&nbsp;(per&nbsp;1000)"))</code></div></div><div class="nspbox"><image src="4.4.png"></image></div><div class="nspbox"><div><h3>Figure 4.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;(base/prop-table&nbsp;late/postdoc&nbsp;:margin&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;:xlab&nbsp;"Proportion"&nbsp;:auto.key&nbsp;{:adj&nbsp;1})))</code></div></div><div class="nspbox"><image src="4.5.png"></image></div><div class="nspbox"><div><h3>Figure 4.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.6.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;(base/prop-table&nbsp;late/postdoc&nbsp;:margin&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Proportion"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.strip.text&nbsp;{:abbreviate&nbsp;true,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:minlength&nbsp;10})))</code></div></div><div class="nspbox"><image src="4.6.png"></image></div><div class="nspbox"><div><h3>Figure 4.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"4.7.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;(base/prop-table&nbsp;late/postdoc&nbsp;:margin&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:index.cond&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(median&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Proportion"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;5]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:relation&nbsp;"free",&nbsp;:rot&nbsp;0}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;{:ylim&nbsp;(levels&nbsp;(reorder&nbsp;y&nbsp;x))})</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[x&nbsp;y&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.dotplot&nbsp;x&nbsp;(reorder&nbsp;y&nbsp;x)&nbsp;...)))))</code></div></div><div class="nspbox"><image src="4.7.png"></image></div><div class="nspbox"><div><h3>Figure 4.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;gcsescore-tab</br>&nbsp;&nbsp;&nbsp;(stats/xtabs&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;gcsescore&nbsp;gender))&nbsp;r.mlmRev/Chem97))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;gcsescore-df</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[df&nbsp;(base/as-data-frame&nbsp;gcsescore-tab)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gcsescore</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;($&nbsp;df&nbsp;'gcsescore)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-character)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-numeric)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.8.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Freq&nbsp;(|&nbsp;gcsescore&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;gcsescore-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"h"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;2]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Average&nbsp;GCSE&nbsp;Score")))</code></div></div><div class="nspbox"><image src="4.8.png"></image></div><div class="nspbox"><div><h3>Figure 4.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;score-tab</br>&nbsp;&nbsp;&nbsp;(stats/xtabs&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;score&nbsp;gender))&nbsp;r.mlmRev/Chem97))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;score-df&nbsp;(base/as-data-frame&nbsp;score-tab))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"4.9.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Freq&nbsp;(|&nbsp;score&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;score-df&nbsp;:origin&nbsp;0)))</code></div></div><div class="nspbox"><image src="4.9.png"></image></div><div class="nspbox"><a id="Chapter-5"> </a><div><h2>Chapter 5</h2></div></div><div class="nspbox"><div><h3>Figure 5.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;(|&nbsp;long&nbsp;(cut&nbsp;depth&nbsp;2)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;quakes)))</code></div></div><div class="nspbox"><image src="5.1.png"></image></div><div class="nspbox"><div><h3>Figure 5.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.2.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;(|&nbsp;long&nbsp;(cut&nbsp;depth&nbsp;3)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;(lat/strip-custom&nbsp;:strip.names&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:var.name&nbsp;"Depth"))))</code></div></div><div class="nspbox"><image src="5.2.png"></image></div><div class="nspbox"><div><h3>Figure 5.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.3.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;long)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(cut&nbsp;depth&nbsp;:breaks&nbsp;(quantile&nbsp;depth&nbsp;(ppoints&nbsp;4&nbsp;1)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;3}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude")))</code></div></div><div class="nspbox"><image src="5.3.png"></image></div><div class="nspbox"><div><h3>Figure 5.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;depth-col</br>&nbsp;&nbsp;&nbsp;(r/bra&nbsp;(dev/gray-colors&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/cut&nbsp;($&nbsp;quakes&nbsp;'depth)&nbsp;100&nbsp;:label&nbsp;false)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;depth-ord&nbsp;(base/rev&nbsp;(base/order&nbsp;($&nbsp;quakes&nbsp;'depth))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;long)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;(r/bra&nbsp;quakes&nbsp;depth-ord&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;21</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fill&nbsp;(r/bra&nbsp;depth-col&nbsp;depth-ord)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude")))</code></div></div><div class="nspbox"><image src="5.4.png"></image></div><div class="nspbox"><div><h3>Figure 5.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;(->&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'Magnitude&nbsp;(lat/equal-count&nbsp;($&nbsp;quakes&nbsp;'mag)&nbsp;4))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'color&nbsp;depth-col)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/summary&nbsp;($&nbsp;quakes&nbsp;'Magnitude))</code></div><div class="nspout"><code class="prettyprint lang-clj"></br>Data:</br>&nbsp;&nbsp;&nbsp;[1]&nbsp;4.8&nbsp;4.2&nbsp;5.4&nbsp;4.1&nbsp;4.0&nbsp;4.0&nbsp;4.8&nbsp;4.4&nbsp;4.7&nbsp;4.3&nbsp;4.4&nbsp;4.6&nbsp;4.4&nbsp;4.4&nbsp;6.1&nbsp;4.3&nbsp;6.0&nbsp;4.5</br>&nbsp;&nbsp;[19]&nbsp;4.4&nbsp;4.4&nbsp;4.5&nbsp;4.2&nbsp;4.4&nbsp;4.7&nbsp;5.4&nbsp;4.0&nbsp;4.6&nbsp;5.2&nbsp;4.5&nbsp;4.4&nbsp;4.6&nbsp;4.7&nbsp;4.8&nbsp;4.0&nbsp;4.5&nbsp;4.3</br>&nbsp;&nbsp;[37]&nbsp;4.5&nbsp;4.6&nbsp;4.1&nbsp;4.4&nbsp;4.7&nbsp;4.6&nbsp;4.4&nbsp;4.3&nbsp;4.6&nbsp;4.9&nbsp;4.5&nbsp;4.4&nbsp;4.3&nbsp;5.1&nbsp;4.2&nbsp;4.0&nbsp;4.6&nbsp;4.3</br>&nbsp;&nbsp;[55]&nbsp;4.2&nbsp;4.4&nbsp;4.5&nbsp;4.0&nbsp;4.4&nbsp;4.3&nbsp;4.7&nbsp;4.1&nbsp;5.0&nbsp;4.6&nbsp;4.9&nbsp;4.7&nbsp;4.1&nbsp;5.0&nbsp;4.5&nbsp;5.5&nbsp;4.0&nbsp;4.5</br>&nbsp;&nbsp;[73]&nbsp;4.3&nbsp;5.2&nbsp;4.4&nbsp;4.3&nbsp;4.1&nbsp;4.5&nbsp;4.2&nbsp;5.3&nbsp;5.2&nbsp;4.5&nbsp;4.6&nbsp;4.3&nbsp;4.0&nbsp;4.3&nbsp;4.7&nbsp;4.5&nbsp;4.2&nbsp;4.3</br>&nbsp;&nbsp;[91]&nbsp;5.1&nbsp;4.7&nbsp;5.2&nbsp;4.2&nbsp;4.2&nbsp;4.0&nbsp;4.5&nbsp;5.2&nbsp;5.1&nbsp;4.7&nbsp;4.1&nbsp;4.6&nbsp;4.7&nbsp;4.7&nbsp;4.6&nbsp;4.2&nbsp;4.4&nbsp;4.6</br>&nbsp;[109]&nbsp;5.7&nbsp;5.0&nbsp;4.5&nbsp;4.2&nbsp;4.0&nbsp;4.8&nbsp;4.4&nbsp;4.2&nbsp;5.3&nbsp;4.7&nbsp;4.8&nbsp;4.2&nbsp;4.8&nbsp;4.3&nbsp;4.7&nbsp;4.5&nbsp;4.4&nbsp;5.1</br>&nbsp;[127]&nbsp;4.2&nbsp;5.0&nbsp;4.8&nbsp;4.3&nbsp;4.5&nbsp;4.2&nbsp;4.5&nbsp;4.6&nbsp;4.3&nbsp;4.7&nbsp;5.1&nbsp;4.6&nbsp;4.9&nbsp;4.2&nbsp;4.6&nbsp;4.0&nbsp;5.0&nbsp;4.4</br>&nbsp;[145]&nbsp;4.2&nbsp;4.2&nbsp;4.4&nbsp;4.9&nbsp;5.3&nbsp;4.0&nbsp;5.7&nbsp;6.4&nbsp;4.3&nbsp;4.2&nbsp;4.7&nbsp;4.7&nbsp;4.2&nbsp;4.3&nbsp;4.9&nbsp;4.6&nbsp;4.1&nbsp;4.8</br>&nbsp;[163]&nbsp;4.6&nbsp;4.6&nbsp;4.8&nbsp;5.0&nbsp;5.6&nbsp;5.3&nbsp;4.7&nbsp;4.5&nbsp;4.3&nbsp;4.6&nbsp;4.1&nbsp;4.1&nbsp;4.1&nbsp;5.7&nbsp;5.0&nbsp;4.5&nbsp;4.1&nbsp;4.6</br>&nbsp;[181]&nbsp;4.5&nbsp;4.3&nbsp;4.4&nbsp;4.2&nbsp;4.1&nbsp;4.9&nbsp;4.3&nbsp;4.9&nbsp;4.6&nbsp;4.6&nbsp;5.3&nbsp;4.7&nbsp;4.6&nbsp;4.1&nbsp;4.6&nbsp;4.2&nbsp;4.6&nbsp;4.5</br>&nbsp;[199]&nbsp;4.3&nbsp;5.2&nbsp;4.3&nbsp;4.0&nbsp;4.7&nbsp;4.5&nbsp;4.5&nbsp;4.3&nbsp;5.2&nbsp;4.5&nbsp;4.7&nbsp;4.2&nbsp;4.7&nbsp;4.3&nbsp;4.1&nbsp;5.4&nbsp;4.3&nbsp;4.3</br>&nbsp;[217]&nbsp;4.2&nbsp;4.6&nbsp;4.4&nbsp;4.2&nbsp;4.7&nbsp;4.6&nbsp;4.9&nbsp;4.2&nbsp;4.5&nbsp;4.9&nbsp;4.2&nbsp;4.5&nbsp;5.0&nbsp;5.0&nbsp;4.7&nbsp;4.3&nbsp;4.4&nbsp;4.9</br>&nbsp;[235]&nbsp;4.5&nbsp;4.0&nbsp;4.4&nbsp;5.0&nbsp;4.7&nbsp;4.8&nbsp;4.5&nbsp;4.1&nbsp;5.3&nbsp;4.8&nbsp;5.0&nbsp;4.6&nbsp;4.3&nbsp;4.7&nbsp;5.3&nbsp;4.2&nbsp;4.7&nbsp;4.5</br>&nbsp;[253]&nbsp;5.1&nbsp;4.9&nbsp;4.4&nbsp;4.2&nbsp;4.6&nbsp;4.7&nbsp;4.2&nbsp;4.9&nbsp;5.1&nbsp;4.7&nbsp;4.4&nbsp;4.4&nbsp;4.2&nbsp;4.9&nbsp;4.6&nbsp;4.4&nbsp;4.6&nbsp;4.5</br>&nbsp;[271]&nbsp;4.4&nbsp;4.9&nbsp;4.1&nbsp;4.2&nbsp;5.7&nbsp;4.6&nbsp;5.0&nbsp;4.3&nbsp;4.5&nbsp;5.2&nbsp;4.4&nbsp;4.2&nbsp;4.6&nbsp;4.0&nbsp;4.4&nbsp;4.7&nbsp;4.2&nbsp;4.7</br>&nbsp;[289]&nbsp;4.5&nbsp;5.0&nbsp;5.0&nbsp;4.8&nbsp;4.6&nbsp;4.6&nbsp;5.0&nbsp;5.0&nbsp;5.6&nbsp;4.0&nbsp;4.0&nbsp;4.6&nbsp;4.4&nbsp;4.8&nbsp;4.7&nbsp;4.6&nbsp;4.3&nbsp;4.7</br>&nbsp;[307]&nbsp;4.1&nbsp;4.9&nbsp;4.6&nbsp;4.8&nbsp;4.9&nbsp;5.1&nbsp;5.4&nbsp;4.5&nbsp;4.9&nbsp;4.4&nbsp;4.1&nbsp;5.3&nbsp;4.5&nbsp;4.9&nbsp;4.8&nbsp;5.2&nbsp;4.4&nbsp;4.4</br>&nbsp;[325]&nbsp;4.9&nbsp;4.4&nbsp;4.2&nbsp;4.6&nbsp;4.6&nbsp;5.3&nbsp;5.3&nbsp;4.5&nbsp;4.4&nbsp;5.0&nbsp;5.1&nbsp;4.5&nbsp;4.5&nbsp;5.4&nbsp;4.5&nbsp;4.7&nbsp;4.2&nbsp;4.8</br>&nbsp;[343]&nbsp;4.5&nbsp;4.3&nbsp;4.3&nbsp;4.3&nbsp;4.6&nbsp;4.5&nbsp;5.0&nbsp;4.6&nbsp;4.6&nbsp;4.9&nbsp;4.1&nbsp;5.5&nbsp;4.7&nbsp;5.0&nbsp;5.1&nbsp;5.5&nbsp;4.6&nbsp;4.7</br>&nbsp;[361]&nbsp;4.2&nbsp;4.0&nbsp;5.4&nbsp;4.3&nbsp;4.4&nbsp;4.6&nbsp;5.1&nbsp;4.5&nbsp;4.2&nbsp;4.1&nbsp;5.1&nbsp;5.4&nbsp;5.1&nbsp;5.1&nbsp;4.4&nbsp;5.7&nbsp;4.4&nbsp;5.1</br>&nbsp;[379]&nbsp;4.6&nbsp;5.5&nbsp;5.1&nbsp;4.4&nbsp;5.0&nbsp;5.0&nbsp;5.1&nbsp;5.1&nbsp;4.2&nbsp;4.5&nbsp;4.0&nbsp;4.9&nbsp;4.3&nbsp;4.8&nbsp;4.4&nbsp;4.2&nbsp;4.9&nbsp;4.2</br>&nbsp;[397]&nbsp;5.3&nbsp;5.0&nbsp;5.7&nbsp;5.3&nbsp;4.7&nbsp;4.6&nbsp;4.3&nbsp;5.4&nbsp;4.4&nbsp;4.3&nbsp;4.3&nbsp;4.7&nbsp;4.4&nbsp;4.2&nbsp;4.5&nbsp;4.8&nbsp;4.8&nbsp;4.3</br>&nbsp;[415]&nbsp;4.4&nbsp;5.1&nbsp;4.4&nbsp;4.4&nbsp;4.3&nbsp;4.8&nbsp;4.3&nbsp;4.5&nbsp;4.1&nbsp;5.1&nbsp;4.7&nbsp;4.6&nbsp;4.7&nbsp;4.6&nbsp;4.4&nbsp;4.2&nbsp;4.1&nbsp;4.7</br>&nbsp;[433]&nbsp;4.0&nbsp;4.8&nbsp;4.4&nbsp;4.3&nbsp;4.4&nbsp;4.5&nbsp;4.5&nbsp;4.7&nbsp;4.3&nbsp;4.7&nbsp;4.8&nbsp;4.6&nbsp;5.1&nbsp;4.7&nbsp;4.3&nbsp;5.1&nbsp;5.5&nbsp;4.5</br>&nbsp;[451]&nbsp;4.3&nbsp;4.3&nbsp;4.7&nbsp;4.3&nbsp;4.3&nbsp;4.6&nbsp;4.5&nbsp;4.5&nbsp;5.4&nbsp;4.6&nbsp;4.4&nbsp;5.0&nbsp;5.2&nbsp;4.4&nbsp;5.1&nbsp;4.4&nbsp;4.4&nbsp;4.8</br>&nbsp;[469]&nbsp;4.4&nbsp;4.7&nbsp;4.7&nbsp;4.4&nbsp;4.3&nbsp;5.0&nbsp;4.5&nbsp;4.6&nbsp;5.4&nbsp;4.6&nbsp;4.5&nbsp;4.4&nbsp;4.5&nbsp;4.1&nbsp;4.0&nbsp;4.9&nbsp;4.1&nbsp;5.2</br>&nbsp;[487]&nbsp;4.4&nbsp;4.1&nbsp;4.9&nbsp;4.6&nbsp;4.5&nbsp;4.8&nbsp;4.2&nbsp;4.2&nbsp;4.1&nbsp;5.5&nbsp;4.4&nbsp;4.8&nbsp;4.2&nbsp;4.8&nbsp;4.9&nbsp;4.6&nbsp;4.5&nbsp;4.4</br>&nbsp;[505]&nbsp;4.6&nbsp;4.2&nbsp;4.7&nbsp;4.4&nbsp;4.5&nbsp;4.9&nbsp;4.7&nbsp;5.5&nbsp;4.7&nbsp;4.6&nbsp;4.1&nbsp;4.7&nbsp;4.6&nbsp;4.3&nbsp;4.4&nbsp;4.7&nbsp;4.3&nbsp;4.1</br>&nbsp;[523]&nbsp;4.7&nbsp;4.5&nbsp;5.5&nbsp;4.5&nbsp;4.6&nbsp;5.1&nbsp;4.4&nbsp;4.7&nbsp;5.5&nbsp;4.6&nbsp;4.0&nbsp;4.6&nbsp;4.8&nbsp;4.7&nbsp;4.7&nbsp;4.2&nbsp;5.4&nbsp;4.6</br>&nbsp;[541]&nbsp;5.5&nbsp;4.2&nbsp;4.5&nbsp;4.5&nbsp;4.8&nbsp;4.6&nbsp;5.4&nbsp;4.6&nbsp;5.0&nbsp;4.3&nbsp;4.3&nbsp;4.8&nbsp;4.7&nbsp;4.7&nbsp;4.8&nbsp;4.2&nbsp;4.2&nbsp;5.9</br>&nbsp;[559]&nbsp;4.6&nbsp;4.5&nbsp;4.9&nbsp;4.7&nbsp;4.9&nbsp;5.3&nbsp;4.2&nbsp;4.2&nbsp;4.5&nbsp;5.2&nbsp;4.5&nbsp;5.6&nbsp;5.2&nbsp;4.8&nbsp;4.5&nbsp;5.0&nbsp;4.4&nbsp;4.5</br>&nbsp;[577]&nbsp;4.6&nbsp;4.5&nbsp;5.2&nbsp;5.1&nbsp;4.8&nbsp;4.3&nbsp;5.1&nbsp;4.7&nbsp;4.6&nbsp;4.8&nbsp;4.6&nbsp;4.4&nbsp;4.6&nbsp;5.1&nbsp;4.3&nbsp;4.4&nbsp;4.7&nbsp;4.8</br>&nbsp;[595]&nbsp;4.1&nbsp;4.6&nbsp;4.9&nbsp;4.0&nbsp;4.7&nbsp;4.7&nbsp;5.2&nbsp;4.6&nbsp;4.6&nbsp;4.9&nbsp;5.7&nbsp;4.7&nbsp;4.4&nbsp;4.9&nbsp;4.8&nbsp;4.6&nbsp;4.4&nbsp;4.8</br>&nbsp;[613]&nbsp;4.7&nbsp;4.2&nbsp;5.1&nbsp;4.8&nbsp;4.9&nbsp;5.1&nbsp;4.3&nbsp;4.4&nbsp;4.7&nbsp;4.7&nbsp;5.3&nbsp;5.1&nbsp;4.9&nbsp;4.5&nbsp;4.7&nbsp;4.2&nbsp;5.1&nbsp;4.8</br>&nbsp;[631]&nbsp;4.2&nbsp;4.8&nbsp;4.4&nbsp;4.5&nbsp;4.3&nbsp;5.6&nbsp;4.0&nbsp;5.0&nbsp;4.2&nbsp;4.6&nbsp;4.6&nbsp;4.5&nbsp;5.0&nbsp;4.7&nbsp;4.6&nbsp;4.8&nbsp;4.6&nbsp;4.4</br>&nbsp;[649]&nbsp;5.6&nbsp;4.2&nbsp;5.4&nbsp;4.8&nbsp;5.6&nbsp;4.4&nbsp;4.7&nbsp;4.6&nbsp;5.1&nbsp;4.6&nbsp;4.5&nbsp;4.2&nbsp;4.8&nbsp;4.9&nbsp;5.5&nbsp;5.0&nbsp;4.2&nbsp;5.2</br>&nbsp;[667]&nbsp;4.8&nbsp;4.4&nbsp;4.8&nbsp;4.4&nbsp;4.1&nbsp;4.9&nbsp;4.6&nbsp;4.5&nbsp;5.3&nbsp;4.8&nbsp;4.6&nbsp;4.8&nbsp;4.7&nbsp;4.9&nbsp;5.3&nbsp;4.4&nbsp;4.6&nbsp;4.3</br>&nbsp;[685]&nbsp;4.4&nbsp;4.2&nbsp;4.1&nbsp;4.2&nbsp;5.0&nbsp;4.1&nbsp;4.3&nbsp;5.2&nbsp;4.2&nbsp;4.5&nbsp;4.4&nbsp;4.4&nbsp;5.0&nbsp;4.0&nbsp;4.8&nbsp;5.0&nbsp;4.2&nbsp;5.2</br>&nbsp;[703]&nbsp;5.2&nbsp;4.5&nbsp;4.3&nbsp;4.5&nbsp;4.6&nbsp;5.1&nbsp;4.4&nbsp;4.3&nbsp;4.7&nbsp;5.6&nbsp;4.9&nbsp;5.1&nbsp;4.6&nbsp;4.4&nbsp;4.8&nbsp;4.2&nbsp;4.7&nbsp;4.1</br>&nbsp;[721]&nbsp;4.7&nbsp;4.0&nbsp;4.9&nbsp;5.0&nbsp;4.5&nbsp;4.4&nbsp;4.0&nbsp;4.5&nbsp;4.7&nbsp;4.4&nbsp;4.7&nbsp;4.7&nbsp;4.0&nbsp;4.2&nbsp;4.5&nbsp;4.7&nbsp;4.5&nbsp;4.1</br>&nbsp;[739]&nbsp;4.6&nbsp;4.3&nbsp;4.6&nbsp;5.2&nbsp;4.6&nbsp;4.7&nbsp;5.0&nbsp;5.2&nbsp;4.4&nbsp;4.6&nbsp;4.5&nbsp;4.0&nbsp;4.2&nbsp;5.3&nbsp;5.9&nbsp;4.9&nbsp;4.5&nbsp;4.4</br>&nbsp;[757]&nbsp;5.4&nbsp;5.3&nbsp;5.1&nbsp;4.1&nbsp;4.3&nbsp;4.5&nbsp;4.1&nbsp;5.1&nbsp;5.3&nbsp;4.5&nbsp;4.1&nbsp;4.4&nbsp;4.7&nbsp;4.0&nbsp;5.1&nbsp;4.0&nbsp;4.3&nbsp;4.3</br>&nbsp;[775]&nbsp;4.0&nbsp;4.1&nbsp;4.4&nbsp;4.3&nbsp;4.2&nbsp;4.0&nbsp;4.5&nbsp;4.7&nbsp;5.0&nbsp;4.3&nbsp;5.1&nbsp;4.7&nbsp;5.3&nbsp;5.0&nbsp;4.5&nbsp;5.0&nbsp;4.1&nbsp;4.9</br>&nbsp;[793]&nbsp;4.1&nbsp;4.0&nbsp;4.4&nbsp;4.5&nbsp;4.4&nbsp;4.5&nbsp;4.3&nbsp;4.3&nbsp;5.0&nbsp;4.5&nbsp;4.5&nbsp;4.4&nbsp;4.5&nbsp;4.1&nbsp;4.9&nbsp;4.7&nbsp;4.3&nbsp;4.6</br>&nbsp;[811]&nbsp;4.6&nbsp;5.2&nbsp;4.5&nbsp;4.3&nbsp;4.6&nbsp;4.0&nbsp;4.5&nbsp;4.8&nbsp;4.6&nbsp;4.1&nbsp;4.9&nbsp;4.7&nbsp;4.1&nbsp;4.3&nbsp;4.4&nbsp;4.0&nbsp;4.8&nbsp;4.4</br>&nbsp;[829]&nbsp;4.4&nbsp;4.6&nbsp;4.2&nbsp;4.1&nbsp;4.2&nbsp;4.0&nbsp;4.1&nbsp;4.1&nbsp;4.7&nbsp;4.8&nbsp;5.1&nbsp;5.0&nbsp;4.8&nbsp;4.4&nbsp;5.0&nbsp;5.2&nbsp;4.2&nbsp;4.1</br>&nbsp;[847]&nbsp;4.8&nbsp;4.5&nbsp;5.0&nbsp;5.1&nbsp;4.1&nbsp;4.7&nbsp;5.2&nbsp;4.8&nbsp;4.5&nbsp;4.0&nbsp;4.7&nbsp;4.1&nbsp;4.3&nbsp;4.3&nbsp;4.0&nbsp;4.7&nbsp;4.1&nbsp;4.2</br>&nbsp;[865]&nbsp;4.8&nbsp;4.8&nbsp;4.2&nbsp;4.2&nbsp;5.7&nbsp;6.0&nbsp;4.2&nbsp;4.5&nbsp;4.9&nbsp;4.4&nbsp;4.0&nbsp;4.3&nbsp;4.2&nbsp;4.5&nbsp;4.8&nbsp;4.4&nbsp;4.2&nbsp;4.2</br>&nbsp;[883]&nbsp;5.0&nbsp;4.2&nbsp;5.2&nbsp;4.5&nbsp;4.6&nbsp;5.0&nbsp;5.0&nbsp;5.4&nbsp;4.8&nbsp;4.2&nbsp;5.5&nbsp;4.3&nbsp;4.1&nbsp;4.4&nbsp;4.9&nbsp;4.5&nbsp;4.9&nbsp;4.0</br>&nbsp;[901]&nbsp;4.5&nbsp;5.0&nbsp;4.9&nbsp;4.5&nbsp;4.2&nbsp;4.2&nbsp;4.2&nbsp;5.2&nbsp;4.3&nbsp;5.1&nbsp;4.6&nbsp;4.6&nbsp;4.4&nbsp;4.4&nbsp;4.9&nbsp;5.1&nbsp;4.2&nbsp;4.7</br>&nbsp;[919]&nbsp;4.0&nbsp;5.6&nbsp;5.3&nbsp;5.0&nbsp;4.3&nbsp;4.1&nbsp;5.1&nbsp;4.5&nbsp;4.9&nbsp;5.4&nbsp;4.7&nbsp;4.8&nbsp;4.5&nbsp;4.2&nbsp;4.6&nbsp;4.6&nbsp;5.6&nbsp;5.4</br>&nbsp;[937]&nbsp;4.0&nbsp;5.2&nbsp;4.2&nbsp;4.7&nbsp;4.3&nbsp;4.8&nbsp;4.6&nbsp;5.4&nbsp;4.8&nbsp;4.6&nbsp;4.2&nbsp;5.5&nbsp;4.7&nbsp;4.7&nbsp;4.5&nbsp;5.5&nbsp;4.5&nbsp;4.1</br>&nbsp;[955]&nbsp;4.0&nbsp;4.3&nbsp;4.7&nbsp;4.9&nbsp;4.5&nbsp;4.7&nbsp;4.5&nbsp;4.8&nbsp;4.3&nbsp;4.1&nbsp;5.4&nbsp;4.1&nbsp;4.8&nbsp;4.2&nbsp;4.8&nbsp;5.4&nbsp;4.4&nbsp;5.2</br>&nbsp;[973]&nbsp;4.7&nbsp;4.9&nbsp;4.9&nbsp;4.2&nbsp;4.4&nbsp;4.4&nbsp;4.3&nbsp;4.9&nbsp;5.0&nbsp;4.7&nbsp;4.9&nbsp;4.3&nbsp;4.5&nbsp;4.2&nbsp;5.2&nbsp;4.8&nbsp;4.0&nbsp;4.7</br>&nbsp;[991]&nbsp;4.3&nbsp;4.3&nbsp;4.9&nbsp;4.0&nbsp;4.2&nbsp;4.4&nbsp;4.7&nbsp;4.5&nbsp;4.5&nbsp;6.0</br></br>Intervals:</br>&nbsp;&nbsp;&nbsp;min&nbsp;&nbsp;max&nbsp;count</br>1&nbsp;3.95&nbsp;4.55&nbsp;&nbsp;&nbsp;484</br>2&nbsp;4.25&nbsp;4.75&nbsp;&nbsp;&nbsp;492</br>3&nbsp;4.45&nbsp;4.95&nbsp;&nbsp;&nbsp;425</br>4&nbsp;4.65&nbsp;6.45&nbsp;&nbsp;&nbsp;415</br></br>Overlap&nbsp;between&nbsp;adjacent&nbsp;intervals:</br>[1]&nbsp;293&nbsp;306&nbsp;217</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;quakes-ordered&nbsp;(r/bra&nbsp;quakes&nbsp;depth-ord&nbsp;nil))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.5.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;(|&nbsp;long&nbsp;Magnitude))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;quakes-ordered</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;fill.color&nbsp;...&nbsp;subscripts]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;fill&nbsp;(bra&nbsp;fill.color&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.grid&nbsp;:h&nbsp;-1&nbsp;:v&nbsp;-1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;x&nbsp;y&nbsp;:pch&nbsp;21&nbsp;:fill&nbsp;fill&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fill.color&nbsp;($&nbsp;quakes-ordered&nbsp;'color)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude")))</code></div></div><div class="nspbox"><image src="5.5.png"></image></div><div class="nspbox"><div><h3>Figure 5.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;depth-breaks</br>&nbsp;&nbsp;&nbsp;(lat/do-breaks&nbsp;(base/range&nbsp;($&nbsp;quakes-ordered&nbsp;'depth))&nbsp;50))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;quakes-ordered</br>&nbsp;&nbsp;&nbsp;(->&nbsp;quakes-ordered</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'color</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/level-colors&nbsp;($&nbsp;quakes-ordered&nbsp;'depth)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;depth-breaks</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.regions&nbsp;dev/gray-colors))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.6.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;lat&nbsp;(|&nbsp;long&nbsp;Magnitude))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;quakes-ordered</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'color</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;groups&nbsp;...&nbsp;subscripts]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;fill&nbsp;(bra&nbsp;groups&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.grid&nbsp;:h&nbsp;-1&nbsp;:v&nbsp;-1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;x&nbsp;y&nbsp;:pch&nbsp;21&nbsp;:fill&nbsp;fill&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:legend&nbsp;{:right&nbsp;{:fun&nbsp;lat/draw-colorkey,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:args&nbsp;{:key&nbsp;{:col&nbsp;dev/grey-colors,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;depth-breaks},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:draw&nbsp;false}}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude")))</code></div></div><div class="nspbox"><image src="5.6.png"></image></div><div class="nspbox"><div><h3>Figure 5.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;types-plain&nbsp;["p"&nbsp;"l"&nbsp;"o"&nbsp;"r"&nbsp;"g"&nbsp;"s"&nbsp;"S"&nbsp;"h"&nbsp;"a"&nbsp;"smooth"])</br>&nbsp;(def&nbsp;types-horiz&nbsp;["s"&nbsp;"S"&nbsp;"h"&nbsp;"a"&nbsp;"smooth"])</br>&nbsp;(def&nbsp;horiz</br>&nbsp;&nbsp;&nbsp;(base/rep&nbsp;[false&nbsp;true]&nbsp;[(count&nbsp;types-plain)&nbsp;(count&nbsp;types-horiz)]))</br>&nbsp;(def&nbsp;types&nbsp;(concat&nbsp;types-plain&nbsp;types-horiz))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/set-seed&nbsp;2007041)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;x&nbsp;(<-&nbsp;'x&nbsp;(base/sample&nbsp;(base/seq&nbsp;-10&nbsp;10&nbsp;:length&nbsp;15)&nbsp;30&nbsp;true)))</br>&nbsp;(def&nbsp;n&nbsp;(stats/rnorm&nbsp;(base/length&nbsp;x)&nbsp;:sd&nbsp;5))</br>&nbsp;(def&nbsp;y</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;(fn&nbsp;[x&nbsp;n]&nbsp;(+&nbsp;x&nbsp;(*&nbsp;0.25&nbsp;(inc&nbsp;x)&nbsp;(inc&nbsp;x))&nbsp;n))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r->clj&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r->clj&nbsp;n))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.7.png")</br>&nbsp;&nbsp;&nbsp;(r/bra</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;y&nbsp;(|&nbsp;x&nbsp;(gl&nbsp;1&nbsp;~(count&nbsp;types))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"type"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;[:!list&nbsp;["horizontal=TRUE"&nbsp;"horizontal=FALSE"]&nbsp;:y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1/6&nbsp;4/6]]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:as.table&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[5&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:between&nbsp;{:y&nbsp;[0&nbsp;1]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(grid.rect)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.fill</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;($&nbsp;(trellis.par.get&nbsp;"strip.background")&nbsp;col)&nbsp;1))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;type&nbsp;(bra&nbsp;~types&nbsp;(panel.number)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(grid.text&nbsp;:lab&nbsp;(sprintf&nbsp;"%s"&nbsp;type)&nbsp;:x&nbsp;0.5&nbsp;:y&nbsp;0.5))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:alternating&nbsp;[0&nbsp;2],&nbsp;:tck&nbsp;[0&nbsp;0.7],&nbsp;:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:layout.widths&nbsp;{:strip.left&nbsp;[1&nbsp;0&nbsp;0&nbsp;0&nbsp;0]}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;type&nbsp;(bra&nbsp;~types&nbsp;(panel.number)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;horizontal&nbsp;(bra&nbsp;~horiz&nbsp;(panel.number)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;...&nbsp;:type&nbsp;type&nbsp;:horizontal&nbsp;horizontal))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/rep&nbsp;1&nbsp;(base/length&nbsp;types))))</code></div></div><div class="nspbox"><image src="5.7.png"></image></div><div class="nspbox"><div><h3>Figure 5.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.8.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;distance)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.grid&nbsp;:h&nbsp;-1&nbsp;:v&nbsp;-1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;...)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.loess&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)")))</code></div></div><div class="nspbox"><image src="5.8.png"></image></div><div class="nspbox"><div><h3>Figure 5.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.9.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;distance)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["g"&nbsp;"p"&nbsp;"smooth"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)")))</code></div></div><div class="nspbox"><image src="5.9.png"></image></div><div class="nspbox"><div><h3>Figure 5.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;earthquake</br>&nbsp;&nbsp;&nbsp;($<-</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Magnitude</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/equal-count&nbsp;($&nbsp;r.MEMSS/Earthquake&nbsp;'Richter)&nbsp;3&nbsp;:overlap&nbsp;0.1)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;coef</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(log2&nbsp;accel)&nbsp;(log2&nbsp;distance))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/lm&nbsp;:data&nbsp;earthquake)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/coef)))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;&nbsp;(Intercept)&nbsp;log2(distance)&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.2663356&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-0.8246557&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.10.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;(|&nbsp;distance&nbsp;Magnitude))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.line&nbsp;"grey"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.abline&nbsp;:reg&nbsp;~coef)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.locfit&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)")))</code></div></div><div class="nspbox"><image src="5.10.png"></image></div><div class="nspbox"><div><h3>Figure 5.11</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.11.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(+&nbsp;min.temp&nbsp;max.temp&nbsp;precip)&nbsp;(|&nbsp;day&nbsp;month))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;late/SeatacWeather</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Temperature&nbsp;and&nbsp;Rainfall"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"l"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"black")))</code></div></div><div class="nspbox"><image src="5.11.png"></image></div><div class="nspbox"><div><h3>Figure 5.12</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;maxp&nbsp;(base/max&nbsp;($&nbsp;late/SeatacWeather&nbsp;'precip)&nbsp;:na.rm&nbsp;true))</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;1.77</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.12.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(+&nbsp;min.temp&nbsp;max.temp&nbsp;(I&nbsp;(*&nbsp;80&nbsp;(/&nbsp;precip&nbsp;~maxp))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(|&nbsp;day&nbsp;month))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;late/SeatacWeather</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Temperature&nbsp;and&nbsp;Rainfall"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["l"&nbsp;"l"&nbsp;"h"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:distribute.type&nbsp;true)))</code></div></div><div class="nspbox"><image src="5.12.png"></image></div><div class="nspbox"><div><h3>Figure 5.13</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.13.png")</br>&nbsp;&nbsp;&nbsp;(stats/update</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/trellis-last-object)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Temperature&nbsp;(Fahrenheit)&nbsp;\n&nbsp;and&nbsp;Rainfall&nbsp;(inches)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;...)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(==&nbsp;(panel.number)&nbsp;2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(do&nbsp;(<-&nbsp;at&nbsp;(pretty&nbsp;[0&nbsp;~maxp]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.axis&nbsp;"right"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:half&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;(/&nbsp;(*&nbsp;at&nbsp;80)&nbsp;~maxp)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:labels&nbsp;at))))))</code></div></div><div class="nspbox"><image src="5.13.png"></image></div><div class="nspbox"><div><h3>Figure 5.14</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.14.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(asinh&nbsp;SSC.H)&nbsp;(|&nbsp;(asinh&nbsp;FL2.H)&nbsp;Days))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;r.hexbin/panel-hexbinplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect.ratio&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:trans&nbsp;base/sqrt)))</code></div></div><div class="nspbox"><image src="5.14.png"></image></div><div class="nspbox"><div><h3>Figure 5.15</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.15.png")&nbsp;(lat/splom&nbsp;USArrests))</code></div></div><div class="nspbox"><image src="5.15.png"></image></div><div class="nspbox"><div><h3>Figure 5.16</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.16.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(|&nbsp;(bra&nbsp;USArrests&nbsp;[3&nbsp;1&nbsp;2&nbsp;4])&nbsp;state.region))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/splom&nbsp;:pscales&nbsp;0&nbsp;:type&nbsp;["g"&nbsp;"p"&nbsp;"smooth"])))</code></div></div><div class="nspbox"><image src="5.16.png"></image></div><div class="nspbox"><div><h3>Figure 5.17</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.17.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(data.frame&nbsp;mpg&nbsp;disp&nbsp;hp&nbsp;drat&nbsp;wt&nbsp;qsec))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/splom</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data&nbsp;mtcars</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'cyl</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pscales&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:varnames&nbsp;["Miles\nper\ngallon"&nbsp;"Displacement\n(cu.&nbsp;in.)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Gross\nhorsepower"&nbsp;"Rear\naxle\nratio"&nbsp;"Weight"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1/4&nbsp;mile\ntime"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;3,&nbsp;:title&nbsp;"Number&nbsp;of&nbsp;Cylinders"})))</code></div></div><div class="nspbox"><image src="5.17.png"></image></div><div class="nspbox"><div><h3>Figure 5.18</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"5.18.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;(bra&nbsp;mtcars&nbsp;[1&nbsp;3&nbsp;4&nbsp;5&nbsp;6&nbsp;7])&nbsp;(factor&nbsp;cyl)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/parallel&nbsp;mtcars</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'carb</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;(lat/simpleKey&nbsp;(->&nbsp;($&nbsp;mtcars&nbsp;'carb)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/factor)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/levels))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lines&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:space&nbsp;"top"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:columns&nbsp;3)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[3&nbsp;1])))</code></div></div><div class="nspbox"><image src="5.18.png"></image></div><div class="nspbox"><div><h3>Figure 5.19</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"5.19.jpg")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(asinh&nbsp;(bra&nbsp;gvhd10&nbsp;[3&nbsp;2&nbsp;4&nbsp;1&nbsp;5])))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/parallel&nbsp;:data&nbsp;late/gvhd10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(==&nbsp;Days&nbsp;13)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:alpha&nbsp;0.01</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;1)))</code></div></div><div class="nspbox"><image src="5.19.jpg"></image></div><div class="nspbox"><a id="Chapter-6"> </a><div><h2>Chapter 6</h2></div></div><div class="nspbox"><div><h3>Figure 6.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;quakes&nbsp;'Magnitude&nbsp;(lat/equal-count&nbsp;($&nbsp;quakes&nbsp;'mag)&nbsp;4)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.1.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;depth&nbsp;(|&nbsp;(*&nbsp;lat&nbsp;long)&nbsp;Magnitude))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;:data&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;(base/rev&nbsp;(base/range&nbsp;($&nbsp;quakes&nbsp;'depth)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;105,&nbsp;:x&nbsp;-70}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;"Depth")))</code></div></div><div class="nspbox"><image src="6.1.png"></image></div><div class="nspbox"><div><h3>Figure 6.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.2.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;depth&nbsp;(|&nbsp;(*&nbsp;lat&nbsp;long)&nbsp;Magnitude))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;:data&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;(base/rev&nbsp;(base/range&nbsp;($&nbsp;quakes&nbsp;'depth)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;80,&nbsp;:x&nbsp;-70}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zoom&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:z&nbsp;{:arrows&nbsp;false,&nbsp;:distance&nbsp;2}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Longitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Latitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;[:!list&nbsp;"Depth\n(km)"&nbsp;:rot&nbsp;90])))</code></div></div><div class="nspbox"><image src="6.2.png"></image></div><div class="nspbox"><div><h3>Figure 6.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;p</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;depth&nbsp;(+&nbsp;long&nbsp;lat))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;[690&nbsp;30]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;1.5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zoom&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:axis.line&nbsp;{:col&nbsp;"transparent"}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;{:draw&nbsp;false})))&nbsp;(def&nbsp;npanel&nbsp;4)</br>&nbsp;(def&nbsp;rotz&nbsp;(base/seq&nbsp;-30&nbsp;30&nbsp;:length&nbsp;npanel))&nbsp;(def&nbsp;roty&nbsp;[3&nbsp;0])</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;p&nbsp;(base/rep&nbsp;1&nbsp;(*&nbsp;2&nbsp;npanel)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[2&nbsp;npanel]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...&nbsp;screen]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;crow&nbsp;(current.row))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ccol&nbsp;(current.column))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.cloud&nbsp;...</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:z&nbsp;(bra&nbsp;~rotz&nbsp;crow),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:x&nbsp;-60,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;(bra&nbsp;~roty&nbsp;ccol)}))))</code></div></div><div class="nspbox"><image src="6.3.png"></image></div><div class="nspbox"><div><h3>Figure 6.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-info</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[state-info&nbsp;(base/data-frame</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;state-name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:long&nbsp;($&nbsp;state-center&nbsp;'x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lat&nbsp;($&nbsp;state-center&nbsp;'y)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:area&nbsp;(r/bra&nbsp;state-x77&nbsp;nil&nbsp;"Area")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:population</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(*&nbsp;1000&nbsp;(bra&nbsp;state.x77&nbsp;nil&nbsp;"Population")))]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;state-info</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;state-info&nbsp;'(/&nbsp;population&nbsp;area)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;density&nbsp;(+&nbsp;long&nbsp;lat))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;state-info</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(!&nbsp;(%in%&nbsp;name&nbsp;["Alaska"&nbsp;"Hawaii"]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"h"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;[0&nbsp;(base/max&nbsp;($&nbsp;state-info&nbsp;'density))]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;{:arrows&nbsp;false})))</code></div></div><div class="nspbox"><image src="6.4.png"></image></div><div class="nspbox"><div><h3>Figure 6.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-map&nbsp;(r.maps/map&nbsp;"state"&nbsp;:plot&nbsp;false&nbsp;:fill&nbsp;false))</br>&nbsp;(def&nbsp;state-map-range-x&nbsp;(r/bra&nbsp;($&nbsp;state-map&nbsp;'range)&nbsp;[1&nbsp;2]))</br>&nbsp;(def&nbsp;state-map-range-y&nbsp;(r/bra&nbsp;($&nbsp;state-map&nbsp;'range)&nbsp;[3&nbsp;4]))</br>&nbsp;(def&nbsp;panel-3dmap</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[...&nbsp;rot.mat&nbsp;distance&nbsp;xlim&nbsp;ylim&nbsp;zlim&nbsp;xlim.scaled&nbsp;ylim.scaled</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zlim.scaled]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;scaled.val</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(function&nbsp;[x&nbsp;original&nbsp;scaled]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;(bra&nbsp;scaled&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;(*&nbsp;(-&nbsp;x&nbsp;(bra&nbsp;original&nbsp;1))&nbsp;(diff&nbsp;scaled))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(diff&nbsp;original)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;m</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ltransform3dto3d</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rbind&nbsp;(scaled.val&nbsp;($&nbsp;~state-map&nbsp;x)&nbsp;xlim&nbsp;xlim.scaled)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(scaled.val&nbsp;($&nbsp;~state-map&nbsp;y)&nbsp;ylim&nbsp;ylim.scaled)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;zlim.scaled&nbsp;1))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rot.mat</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.lines&nbsp;(bra&nbsp;m&nbsp;1&nbsp;nil)&nbsp;(bra&nbsp;m&nbsp;2&nbsp;nil)&nbsp;:col&nbsp;"grey76"))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.5.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;density&nbsp;(+&nbsp;long&nbsp;lat))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-info</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(!&nbsp;(%in%&nbsp;name&nbsp;["Alaska"&nbsp;"Hawaii"]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.3d.cloud</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[...]&nbsp;(~panel-3dmap&nbsp;...)&nbsp;(panel.3dscatter&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"h"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zoom&nbsp;1.1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlim&nbsp;state-map-range-x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylim&nbsp;state-map-range-y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;'[(/&nbsp;(diff&nbsp;~state-map-range-y)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(diff&nbsp;~state-map-range-x))&nbsp;0.3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;30,&nbsp;:x&nbsp;-60}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:axis.line&nbsp;{:col&nbsp;"transparent"},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:box.3d&nbsp;{:col&nbsp;"transparent",&nbsp;:alpha&nbsp;0}})))</code></div></div><div class="nspbox"><image src="6.5.png"></image></div><div class="nspbox"><div><h3>Figure 6.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;env</br>&nbsp;&nbsp;&nbsp;(->&nbsp;lat/environmental</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'ozone&nbsp;(r/r**&nbsp;($&nbsp;lat/environmental&nbsp;'ozone)&nbsp;1/3))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'Radiation</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/equal-count&nbsp;($&nbsp;lat/environmental&nbsp;'radiation)&nbsp;4))))</code></div><div class="nspout"><code class="prettyprint lang-clj">#'clojisr-examples.lattice/env</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.6.png")</br>&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;'(formula&nbsp;ozone&nbsp;(|&nbsp;(+&nbsp;wind&nbsp;temperature)&nbsp;Radiation))&nbsp;env))</code></div></div><div class="nspbox"><image src="6.6.png"></image></div><div class="nspbox"><div><h3>Figure 6.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.7.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/splom&nbsp;(r/bra&nbsp;env&nbsp;[1&nbsp;2&nbsp;3&nbsp;4])))</code></div></div><div class="nspbox"><image src="6.7.png"></image></div><div class="nspbox"><div><h3>Figure 6.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;fm1-env</br>&nbsp;&nbsp;&nbsp;(stats/lm&nbsp;'(formula&nbsp;ozone&nbsp;(*&nbsp;radiation&nbsp;temperature&nbsp;wind))&nbsp;env))</code></div><div class="nspout"><code class="prettyprint lang-clj"></br>Call:</br>.MEM$x071390e45d5f459f(formula&nbsp;=&nbsp;(ozone&nbsp;~&nbsp;radiation&nbsp;*&nbsp;temperature&nbsp;*&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;wind),&nbsp;data&nbsp;=&nbsp;.MEM$x4dd0e0b6af004c42)</br></br>Coefficients:</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Intercept)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radiation&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-3.397e+00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6.539e-03&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temperature&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wind&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8.668e-02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.208e-01&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radiation:temperature&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;radiation:wind&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-4.032e-05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-9.625e-04&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temperature:wind&nbsp;&nbsp;radiation:temperature:wind&nbsp;&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-5.029e-03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.167e-05&nbsp;&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;fm2-env</br>&nbsp;&nbsp;&nbsp;(stats/loess&nbsp;'(formula&nbsp;ozone&nbsp;(*&nbsp;wind&nbsp;temperature&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:span&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:degree&nbsp;1))</code></div><div class="nspout"><code class="prettyprint lang-clj">Call:</br>.MEM$xf874373755974a27(formula&nbsp;=&nbsp;(ozone&nbsp;~&nbsp;wind&nbsp;*&nbsp;temperature&nbsp;*&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;radiation),&nbsp;data&nbsp;=&nbsp;.MEM$x4dd0e0b6af004c42,&nbsp;span&nbsp;=&nbsp;0.75,&nbsp;degree&nbsp;=&nbsp;1)</br></br>Number&nbsp;of&nbsp;Observations:&nbsp;111&nbsp;</br>Equivalent&nbsp;Number&nbsp;of&nbsp;Parameters:&nbsp;7.26&nbsp;</br>Residual&nbsp;Standard&nbsp;Error:&nbsp;0.4579&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;fm3-env</br>&nbsp;&nbsp;&nbsp;(stats/loess&nbsp;'(formula&nbsp;ozone&nbsp;(*&nbsp;wind&nbsp;temperature&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:parametric&nbsp;["radiation"&nbsp;"wind"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:span&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:degree&nbsp;2))</code></div><div class="nspout"><code class="prettyprint lang-clj">Call:</br>.MEM$xf874373755974a27(formula&nbsp;=&nbsp;(ozone&nbsp;~&nbsp;wind&nbsp;*&nbsp;temperature&nbsp;*&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;radiation),&nbsp;data&nbsp;=&nbsp;.MEM$x4dd0e0b6af004c42,&nbsp;span&nbsp;=&nbsp;0.75,&nbsp;degree&nbsp;=&nbsp;2,&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;parametric&nbsp;=&nbsp;c("radiation",&nbsp;"wind"))</br></br>Number&nbsp;of&nbsp;Observations:&nbsp;111&nbsp;</br>Equivalent&nbsp;Number&nbsp;of&nbsp;Parameters:&nbsp;14.52&nbsp;</br>Residual&nbsp;Standard&nbsp;Error:&nbsp;0.4278&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;fm4-env</br>&nbsp;&nbsp;&nbsp;(r.locfit/locfit&nbsp;'(formula&nbsp;ozone&nbsp;(*&nbsp;wind&nbsp;temperature&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env))</code></div><div class="nspout"><code class="prettyprint lang-clj">Call:</br>.MEM$xc4da35c3f9d54717(formula&nbsp;=&nbsp;(ozone&nbsp;~&nbsp;wind&nbsp;*&nbsp;temperature&nbsp;*&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;radiation),&nbsp;data&nbsp;=&nbsp;.MEM$x4dd0e0b6af004c42)</br></br>Number&nbsp;of&nbsp;observations:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;111&nbsp;</br>Family:&nbsp;&nbsp;Gaussian&nbsp;</br>Fitted&nbsp;Degrees&nbsp;of&nbsp;freedom:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.421&nbsp;</br>Residual&nbsp;scale:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.452&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;w-mesh&nbsp;(r&nbsp;'(with&nbsp;~env&nbsp;(do.breaks&nbsp;(range&nbsp;wind)&nbsp;50))))</br>&nbsp;(def&nbsp;t-mesh&nbsp;(r&nbsp;'(with&nbsp;~env&nbsp;(do.breaks&nbsp;(range&nbsp;temperature)&nbsp;50))))</br>&nbsp;(def&nbsp;r-mesh&nbsp;(r&nbsp;'(with&nbsp;~env&nbsp;(do.breaks&nbsp;(range&nbsp;radiation)&nbsp;3))))</br>&nbsp;(def&nbsp;grid</br>&nbsp;&nbsp;&nbsp;(as->&nbsp;(base/expand-grid&nbsp;:wind&nbsp;w-mesh</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:temperature&nbsp;t-mesh</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:radiation&nbsp;r-mesh)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/brabra<-&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fit.linear"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/predict&nbsp;fm1-env&nbsp;:newdata&nbsp;grid))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/brabra<-&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fit.loess.1"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-vector&nbsp;(stats/predict&nbsp;fm2-env&nbsp;:newdata&nbsp;grid)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/brabra<-&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fit.loess.2"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-vector&nbsp;(stats/predict&nbsp;fm3-env&nbsp;:newdata&nbsp;grid)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/brabra<-&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fit.locfit"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:value</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/predict&nbsp;fm4-env&nbsp;:newdata&nbsp;grid))))</code></div><div class="nspout"><code class="prettyprint lang-clj">#'clojisr-examples.lattice/grid</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.8.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(+&nbsp;fit.linear&nbsp;fit.loess.1&nbsp;fit.loess.2&nbsp;fit.locfit)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(|&nbsp;(*&nbsp;wind&nbsp;temperature)&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;grid&nbsp;:outer&nbsp;true&nbsp;:shade&nbsp;true&nbsp;:zlab&nbsp;"")))</code></div></div><div class="nspbox"><image src="6.8.png"></image></div><div class="nspbox"><div><h3>Figure 6.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.9.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;fit.linear&nbsp;fit.loess.1&nbsp;fit.loess.2&nbsp;fit.locfit)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(|&nbsp;(*&nbsp;wind&nbsp;temperature)&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;:data&nbsp;grid)))</code></div></div><div class="nspbox"><image src="6.9.png"></image></div><div class="nspbox"><div><h3>Figure 6.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.10.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;fit.locfit&nbsp;(|&nbsp;(*&nbsp;wind&nbsp;temperature)&nbsp;radiation))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/contourplot&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;4]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cuts&nbsp;15</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:label.style&nbsp;"align")))</code></div></div><div class="nspbox"><image src="6.10.png"></image></div><div class="nspbox"><div><h3>Figure 6.11</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.11a.png")&nbsp;(lat/levelplot&nbsp;volcano))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.11b.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/contourplot&nbsp;volcano&nbsp;:cuts&nbsp;20&nbsp;:label&nbsp;false))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.11c.png")</br>&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;volcano&nbsp;:panel.aspect&nbsp;0.7&nbsp;:zoom&nbsp;1&nbsp;:zlab&nbsp;"volcano"))</code></div></div><div class="nspbox"><div><image src="6.11a.png"></image><image src="6.11b.png"></image><image src="6.11c.png"></image></div></div><div class="nspbox"><div><h3>Figure 6.12</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;cor-cars93</br>&nbsp;&nbsp;&nbsp;(stats/cor&nbsp;(r/bra&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/r!&nbsp;(base/sapply&nbsp;r.MASS/Cars93&nbsp;base/is-factor)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:use</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"pair"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.12.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;cor-cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;:scales&nbsp;{:x&nbsp;{:rot&nbsp;90}})))</code></div></div><div class="nspbox"><image src="6.12.png"></image></div><div class="nspbox"><div><h3>Figure 6.13</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;ord</br>&nbsp;&nbsp;&nbsp;(->&nbsp;cor-cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/dist)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/hclust)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/as-dendrogram)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/order-dendrogram)))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;[1]&nbsp;&nbsp;8&nbsp;&nbsp;9&nbsp;&nbsp;4&nbsp;&nbsp;5&nbsp;11&nbsp;16&nbsp;17&nbsp;&nbsp;7&nbsp;&nbsp;3&nbsp;&nbsp;1&nbsp;&nbsp;2&nbsp;15&nbsp;&nbsp;6&nbsp;14&nbsp;10&nbsp;18&nbsp;12&nbsp;13</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.13.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;(r/bra&nbsp;cor-cars93&nbsp;ord&nbsp;ord)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;:at&nbsp;(lat/do-breaks&nbsp;[-1.01&nbsp;1.01]&nbsp;20)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:rot&nbsp;90}})))</code></div></div><div class="nspbox"><image src="6.13.png"></image></div><div class="nspbox"><div><h3>Figure 6.14</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r/data&nbsp;'Chem97&nbsp;"mlmRev")</code></div><div class="nspout"><code class="prettyprint lang-clj">#'clojisr-examples.lattice/Chem97</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;chem97</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gcd</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(with&nbsp;Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cut&nbsp;gcsescore</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:breaks</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(quantile&nbsp;gcsescore&nbsp;(ppoints&nbsp;11&nbsp;:a&nbsp;1))))))</br>&nbsp;(def&nbsp;chem-tab&nbsp;(stats/xtabs&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;score&nbsp;gcd&nbsp;gender))&nbsp;chem97))</br>&nbsp;(def&nbsp;chem-tab-df&nbsp;(base/as-data-frame-table&nbsp;chem-tab))</br>&nbsp;(def&nbsp;tick-at</br>&nbsp;&nbsp;&nbsp;(->&nbsp;chem-tab-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;'Freq)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/sqrt)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/range)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/pretty)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"6.14.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(sqrt&nbsp;Freq)&nbsp;(|&nbsp;(*&nbsp;score&nbsp;gcd)&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;chem-tab-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:shrink&nbsp;[0.7&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:colorkey&nbsp;{:labels&nbsp;{:at&nbsp;tick-at,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:labels&nbsp;(r/r**&nbsp;tick-at&nbsp;2)}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso")))</code></div></div><div class="nspbox"><image src="6.14.png"></image></div><div class="nspbox"><div><h3>Figure 6.15</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.15.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Freq&nbsp;(|&nbsp;(*&nbsp;score&nbsp;gcd)&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;:data&nbsp;chem-tab-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;-40,&nbsp;:x&nbsp;-25}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zoom&nbsp;1.1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.facet&nbsp;"grey"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xbase&nbsp;0.7</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ybase&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:box.3d&nbsp;{:col&nbsp;"transparent"}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;[1.5&nbsp;0.75]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.3d.cloud&nbsp;late/panel-3dbars)))</code></div></div><div class="nspbox"><image src="6.15.png"></image></div><div class="nspbox"><div><h3>Figure 6.16</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;grid</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[grid&nbsp;(base/expand-grid&nbsp;:u&nbsp;(lat/do-breaks&nbsp;[0.01&nbsp;0.99]&nbsp;25)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:v&nbsp;(lat/do-breaks&nbsp;[0.01&nbsp;0.99]&nbsp;25))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cb&nbsp;(base/cbind&nbsp;($&nbsp;grid&nbsp;'u)&nbsp;($&nbsp;grid&nbsp;'v))]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'frank&nbsp;(r.copula/dCopula&nbsp;cb&nbsp;(r.copula/frankCopula&nbsp;2)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'gumbel&nbsp;(r.copula/dCopula&nbsp;cb&nbsp;(r.copula/gumbelCopula&nbsp;1.2)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'normal&nbsp;(r.copula/dCopula&nbsp;cb&nbsp;(r.copula/normalCopula&nbsp;0.4)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'t&nbsp;(r.copula/dCopula&nbsp;cb&nbsp;(r.copula/tCopula&nbsp;0.4))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.16.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(+&nbsp;frank&nbsp;gumbel&nbsp;normal&nbsp;t)&nbsp;(*&nbsp;u&nbsp;v))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:outer&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;-30,&nbsp;:x&nbsp;-50})))</code></div></div><div class="nspbox"><image src="6.16.png"></image></div><div class="nspbox"><div><h3>Figure 6.17</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.17.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(+&nbsp;frank&nbsp;gumbel&nbsp;normal&nbsp;t)&nbsp;(*&nbsp;u&nbsp;v))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:outer&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;-30,&nbsp;:x&nbsp;-50}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:z&nbsp;{:log&nbsp;true}})))</code></div></div><div class="nspbox"><image src="6.17.png"></image></div><div class="nspbox"><div><h3>Figure 6.18</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;rr&nbsp;2)&nbsp;(def&nbsp;tt&nbsp;1)&nbsp;(def&nbsp;n&nbsp;50)</br>&nbsp;(def&nbsp;kx</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'kx</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[u&nbsp;v]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;(cos&nbsp;u)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(-&nbsp;(+&nbsp;~rr&nbsp;(*&nbsp;(cos&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;~tt&nbsp;v))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;(sin&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;2&nbsp;~tt&nbsp;v))))))))</br>&nbsp;(def&nbsp;ky</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'ky</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[u&nbsp;v]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;(sin&nbsp;u)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(-&nbsp;(+&nbsp;~rr&nbsp;(*&nbsp;(cos&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;~tt&nbsp;v))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;(sin&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;2&nbsp;~tt&nbsp;v))))))))</br>&nbsp;(def&nbsp;kz</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'kz</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[u&nbsp;v]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;(*&nbsp;(sin&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;~tt&nbsp;v)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;(cos&nbsp;(/&nbsp;u&nbsp;2))&nbsp;(sin&nbsp;(*&nbsp;~tt&nbsp;v)))))))</br>&nbsp;(def&nbsp;u&nbsp;(r/r*&nbsp;(base/seq&nbsp;0.3&nbsp;1.25&nbsp;:length&nbsp;n)&nbsp;2&nbsp;base/pi))</br>&nbsp;(def&nbsp;v&nbsp;(r/r*&nbsp;(base/seq&nbsp;0&nbsp;1&nbsp;:length&nbsp;n)&nbsp;2&nbsp;base/pi))</br>&nbsp;(def&nbsp;um&nbsp;(<-&nbsp;'um&nbsp;(base/matrix&nbsp;u&nbsp;(base/length&nbsp;u)&nbsp;(base/length&nbsp;v))))</br>&nbsp;(def&nbsp;vm</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'vm</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/matrix&nbsp;v&nbsp;(base/length&nbsp;v)&nbsp;(base/length&nbsp;u)&nbsp;:byrow&nbsp;true)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.18.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(kz&nbsp;um&nbsp;vm)&nbsp;(+&nbsp;(kx&nbsp;um&nbsp;vm)&nbsp;(ky&nbsp;um&nbsp;vm)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;:shade&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;170,&nbsp;:x&nbsp;-60}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:alpha&nbsp;0.75</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;[1&nbsp;0.4])))</code></div></div><div class="nspbox"><image src="6.18.png"></image></div><div class="nspbox"><div><h3>Figure 6.19</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r.utils/str&nbsp;late/USAge-df)</code></div><div class="nspout"><code class="prettyprint lang-clj">NULL</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;brewer-div</br>&nbsp;&nbsp;&nbsp;(dev/colorRampPalette&nbsp;(r.RColorBrewer/brewer-pal&nbsp;11&nbsp;"Spectral")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:interpolate</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"spline"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"6.19.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Population&nbsp;(|&nbsp;(*&nbsp;Year&nbsp;Age)&nbsp;Sex))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;:data&nbsp;late/USAge-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cuts&nbsp;199</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.regions&nbsp;(brewer-div&nbsp;200)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso")))</code></div></div><div class="nspbox"><image src="6.19.png"></image></div><div class="nspbox"><a id="Chapter-7"> </a><div><h2>Chapter 7</h2></div></div><div class="nspbox"><div><h3>Figure 7.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;vad-plot</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(reorder&nbsp;Var2&nbsp;Freq)&nbsp;(|&nbsp;Freq&nbsp;Var1))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;:data&nbsp;(base/as-data-frame-table&nbsp;VADeaths)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:origin&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"h"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Death&nbsp;Rates&nbsp;in&nbsp;Virgninia&nbsp;-&nbsp;1940"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Number&nbsp;of&nbsp;deaths&nbsp;per&nbsp;100")))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"7.1.png")&nbsp;vad-plot)</code></div></div><div class="nspbox"><image src="7.1.png"></image></div><div class="nspbox"><div><h3>Figure 7.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;dot-line-settings&nbsp;(lat/trellis-par-get&nbsp;"dot.line"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;dot-line-settings)</code></div><div class="nspout"><code class="prettyprint lang-clj">{:alpha&nbsp;[1.0],&nbsp;:col&nbsp;["#e6e6e6"],&nbsp;:lty&nbsp;[1.0],&nbsp;:lwd&nbsp;[1.0]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;dot-line-settings&nbsp;($<-&nbsp;dot-line-settings&nbsp;'col&nbsp;"transparent"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(lat/trellis-par-set&nbsp;"dot.line"&nbsp;dot-line-settings)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;plot-line-settings&nbsp;(lat/trellis-par-get&nbsp;"plot.line"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;plot-line-settings)</code></div><div class="nspout"><code class="prettyprint lang-clj">{:alpha&nbsp;[1.0],&nbsp;:col&nbsp;["#0080ff"],&nbsp;:lty&nbsp;[1.0],&nbsp;:lwd&nbsp;[1.0]}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;plot-line-settings&nbsp;($<-&nbsp;plot-line-settings&nbsp;'lwd&nbsp;2))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(lat/trellis-par-set&nbsp;"plot.line"&nbsp;plot-line-settings)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"7.2.png")&nbsp;vad-plot)</code></div></div><div class="nspbox"><image src="7.2.png"></image></div><div class="nspbox"><div><h3>Figure 7.2 (alternative)</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-dotline</br>&nbsp;&nbsp;&nbsp;(<-&nbsp;'panel.dotline</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;:col&nbsp;($&nbsp;dot.symbol&nbsp;col)&nbsp;:pch&nbsp;($&nbsp;dot.symbol&nbsp;pch)&nbsp;:cex</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;dot.symbol&nbsp;cex)&nbsp;:alpha&nbsp;($&nbsp;dot.symbol&nbsp;alpha)&nbsp;:col.line</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;plot.line&nbsp;col)&nbsp;:lty&nbsp;($&nbsp;plot.line&nbsp;lty)&nbsp;:lwd</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;plot.line&nbsp;lwd)&nbsp;:alpha.line&nbsp;($&nbsp;plot.line&nbsp;alpha)&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;dot.symbol&nbsp;(trellis.par.get&nbsp;"dot.symbol"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;plot.line&nbsp;(trellis.par.get&nbsp;"plot.line"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.segments&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;col.line</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;lty</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;lwd</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:alpha&nbsp;alpha.line)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.points&nbsp;x&nbsp;y&nbsp;:col&nbsp;col&nbsp;:pch&nbsp;pch&nbsp;:cex&nbsp;cex&nbsp;:alpha&nbsp;alpha))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(lat/trellis-par-set&nbsp;:dot.line&nbsp;dot-line-settings</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.line&nbsp;plot-line-settings)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(lat/trellis-par-set&nbsp;:dot.line&nbsp;{:col&nbsp;"transparent"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.line&nbsp;{:lwd&nbsp;2})</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(lat/trellis-par-set&nbsp;{:dot.line&nbsp;{:col&nbsp;"transparent"},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.line&nbsp;{:lwd&nbsp;2}})</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"7.2a.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/update&nbsp;vad-plot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:dot.line&nbsp;{:col&nbsp;"transparent"},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot.line&nbsp;{:lwd&nbsp;2}}))</code></div></div><div class="nspbox"><image src="7.2a.png"></image></div><div class="nspbox"><div><h3>Figure 7.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;unusual</br>&nbsp;&nbsp;&nbsp;["grid.pars"&nbsp;"fontsize"&nbsp;"clip"&nbsp;"axis.components"&nbsp;"layout.heights"</br>&nbsp;&nbsp;&nbsp;&nbsp;"layout.widths"])</br>&nbsp;(def&nbsp;tp</br>&nbsp;&nbsp;&nbsp;(reduce&nbsp;#(r/brabra<-&nbsp;%1&nbsp;%2&nbsp;:value&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/trellis-par-get)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unusual))&nbsp;(def&nbsp;names-tp&nbsp;(base/lapply&nbsp;tp&nbsp;base/names))</br>&nbsp;(def&nbsp;unames</br>&nbsp;&nbsp;&nbsp;(->&nbsp;names-tp</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/unlist</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/unique</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/sort))</br>&nbsp;(def&nbsp;ans</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[tans&nbsp;(->&nbsp;(base/matrix&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:nrow&nbsp;(base/length&nbsp;names-tp)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ncol&nbsp;(base/length&nbsp;unames))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/rownames<-&nbsp;(base/names&nbsp;names-tp))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/colnames<-&nbsp;unames))]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as->&nbsp;(reduce&nbsp;#(r/bra<-&nbsp;%1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-numeric</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/%in%&nbsp;unames</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/brabra&nbsp;names-tp&nbsp;%2))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tans</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r->clj&nbsp;(base/seq&nbsp;:along&nbsp;names-tp)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;ans&nbsp;nil&nbsp;`(order&nbsp;(-&nbsp;(colSums&nbsp;~ans))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;ans</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;ans</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/rowSums</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/order)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra<-&nbsp;ans&nbsp;`(==&nbsp;~ans&nbsp;0)&nbsp;'NA))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"7.3.png")</br>&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;(base/t&nbsp;ans)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:colorkey&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:rot&nbsp;90}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function&nbsp;[x&nbsp;y&nbsp;z&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.abline&nbsp;:v&nbsp;(unique&nbsp;(as.numeric&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:h&nbsp;(unique&nbsp;(as.numeric&nbsp;y))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;"darkgrey")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;x&nbsp;y&nbsp;:pch&nbsp;(*&nbsp;16&nbsp;z)&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Graphical&nbsp;parameters"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Setting&nbsp;names"))</code></div></div><div class="nspbox"><image src="7.3.png"></image></div><div class="nspbox"><div><h3>Figure 7.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"7.4.png")&nbsp;(lat/show-settings))</code></div></div><div class="nspbox"><image src="7.4.png"></image></div><div class="nspbox"><a id="Chapter-8"> </a><div><h2>Chapter 8</h2></div></div><div class="nspbox"><div><h3>Figure 8.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.1.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;depth&nbsp;(factor&nbsp;mag))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/stripplot&nbsp;:data&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:jitter.data&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;"free",&nbsp;:rot&nbsp;0}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;'(function&nbsp;[x&nbsp;y&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:ylim&nbsp;(rev&nbsp;(range&nbsp;y))})</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter&nbsp;scale)")))</code></div></div><div class="nspbox"><image src="8.1.png"></image></div><div class="nspbox"><div><h3>Figure 8.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.2.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;(/&nbsp;counts&nbsp;1000)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(|&nbsp;time&nbsp;(equal.count&nbsp;(as.numeric&nbsp;time)&nbsp;9&nbsp;:overlap&nbsp;0.1)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/biocAccess</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"l"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Numer&nbsp;of&nbsp;accesses&nbsp;(thousands)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:relation&nbsp;"sliced",&nbsp;:axs&nbsp;"i"},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;{:alternating&nbsp;false}})))</code></div></div><div class="nspbox"><image src="8.2.png"></image></div><div class="nspbox"><div><h3>Figure 8.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.3.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;distance)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;lat/prepanel-loess</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"&nbsp;"smooth"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)")))</code></div></div><div class="nspbox"><image src="8.3.png"></image></div><div class="nspbox"><div><h3>Figure 8.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;yscale-components-log2</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ans&nbsp;(yscale.components.default&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;right)&nbsp;($&nbsp;ans&nbsp;left))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;left&nbsp;labels&nbsp;labels)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(parse&nbsp;:text&nbsp;($&nbsp;ans&nbsp;left&nbsp;labels&nbsp;labels)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;right&nbsp;labels&nbsp;labels)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~r.MASS/fractions&nbsp;(**&nbsp;2&nbsp;($&nbsp;ans&nbsp;right&nbsp;labels&nbsp;at))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans)))</br>&nbsp;(def&nbsp;log-ticks</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[lim&nbsp;:loc&nbsp;[1&nbsp;5]]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ii&nbsp;(+&nbsp;(floor&nbsp;(log10&nbsp;(range&nbsp;lim)))&nbsp;[-1&nbsp;2]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;main&nbsp;(**&nbsp;10&nbsp;(colon&nbsp;(bra&nbsp;ii&nbsp;1)&nbsp;(bra&nbsp;ii&nbsp;2))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;r&nbsp;(as.numeric&nbsp;(outer&nbsp;loc&nbsp;main&nbsp;"*")))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;r&nbsp;(&&nbsp;(<=&nbsp;(bra&nbsp;lim&nbsp;1)&nbsp;r)&nbsp;(<=&nbsp;r&nbsp;(bra&nbsp;lim&nbsp;2)))))))</br>&nbsp;(def&nbsp;xscale-components-log2</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[lim&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ans&nbsp;(xscale.components.default&nbsp;:lim&nbsp;lim&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;tick.at&nbsp;(~log-ticks&nbsp;(**&nbsp;2&nbsp;lim)&nbsp;:loc&nbsp;[1&nbsp;3]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;ticks&nbsp;at)&nbsp;(log&nbsp;tick.at&nbsp;2))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;at)&nbsp;(log&nbsp;tick.at&nbsp;2))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;labels)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as.character&nbsp;tick.at))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.4.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;(|&nbsp;distance&nbsp;(cut&nbsp;Richter&nbsp;[4.9&nbsp;5.5&nbsp;6.5&nbsp;7.8])))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;2,&nbsp;:y&nbsp;{:alternating&nbsp;3}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xscale.components&nbsp;xscale-components-log2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:yscale.components&nbsp;yscale-components-log2)))</code></div></div><div class="nspbox"><image src="8.4.png"></image></div><div class="nspbox"><div><h3>Figure 8.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;xscale-components-log10</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[lim&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ans&nbsp;(xscale.components.default&nbsp;:lim&nbsp;lim&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;tick.at&nbsp;(~log-ticks&nbsp;(**&nbsp;10&nbsp;lim)&nbsp;:loc&nbsp;(colon&nbsp;1&nbsp;9)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;tick.at.major&nbsp;(~log-ticks&nbsp;(**&nbsp;10&nbsp;lim)&nbsp;:loc&nbsp;1))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;major&nbsp;(%in%&nbsp;tick.at&nbsp;tick.at.major))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;ticks&nbsp;at)&nbsp;(log&nbsp;tick.at&nbsp;10))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;ticks&nbsp;tck)&nbsp;(ifelse&nbsp;major&nbsp;1.5&nbsp;0.75))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;at)&nbsp;(log&nbsp;tick.at&nbsp;10))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;labels)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as.character&nbsp;tick.at))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;(bra&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;labels)&nbsp;(!&nbsp;major))&nbsp;"")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;($&nbsp;ans&nbsp;bottom&nbsp;labels&nbsp;check.overlap)&nbsp;false)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.5.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;accel&nbsp;distance)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.MEMSS/Earthquake</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;lat/prepanel-loess</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;10}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Distance&nbsp;From&nbsp;Epicenter&nbsp;(km)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Maximum&nbsp;Horizontal&nbsp;Acceleration&nbsp;(g)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xscale.components&nbsp;xscale-components-log10)))</code></div></div><div class="nspbox"><image src="8.5.png"></image></div><div class="nspbox"><div><h3>Figure 8.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;axis-cf</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[side&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(==&nbsp;side&nbsp;"right")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(do&nbsp;(<-&nbsp;F2C&nbsp;(function&nbsp;[f]&nbsp;(/&nbsp;(*&nbsp;5&nbsp;(-&nbsp;f&nbsp;32))&nbsp;9)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;C2F&nbsp;(function&nbsp;[c]&nbsp;(+&nbsp;32&nbsp;(/&nbsp;(*&nbsp;9&nbsp;c)&nbsp;5))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ylim&nbsp;($&nbsp;(current.panel.limits)&nbsp;ylim))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;prettyF&nbsp;(pretty&nbsp;ylim))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;prettyC&nbsp;(pretty&nbsp;(F2C&nbsp;ylim)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.axis&nbsp;:side&nbsp;side</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:outside&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;prettyF</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tck&nbsp;5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:line.col&nbsp;"grey65"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:text.col&nbsp;"grey35")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.axis&nbsp;:side&nbsp;side</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:outside&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;(C2F&nbsp;prettyC)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:labels&nbsp;(as.character&nbsp;prettyC)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:tck&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:line.col&nbsp;"black"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:text.col&nbsp;"black"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(axis.default&nbsp;:side&nbsp;side&nbsp;...)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"8.6.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nhtemp&nbsp;(time&nbsp;nhtemp))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"o"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:alternating&nbsp;2,&nbsp;:tck&nbsp;[1&nbsp;5]}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Year"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Temperature"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Yearly&nbsp;temperature&nbsp;in&nbsp;New&nbsp;Haven,&nbsp;CT"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;{:text&nbsp;[:!list&nbsp;["(Celcius)"&nbsp;"(Fahrenheit)"]&nbsp;:col</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;["black"&nbsp;"grey35"]],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:axis&nbsp;axis-cf)))</code></div></div><div class="nspbox"><image src="8.6.png"></image></div><div class="nspbox"><a id="Chapter-9"> </a><div><h2>Chapter 9</h2></div></div><div class="nspbox"><div><h3>Figure 9.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/table&nbsp;($&nbsp;r.MASS/Cars93&nbsp;'Cylinders))</code></div><div class="nspout"><code class="prettyprint lang-clj"></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;rotary&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;sup-sym</br>&nbsp;&nbsp;&nbsp;(lat/Rows&nbsp;(lat/trellis-par-get&nbsp;"superpose.symbol")&nbsp;(r/colon&nbsp;1&nbsp;5)))</code></div><div class="nspout"><code class="prettyprint lang-clj">$alpha</br>[1]&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;1</br></br>$cex</br>[1]&nbsp;0.8&nbsp;0.8&nbsp;0.8&nbsp;0.8&nbsp;0.8</br></br>$col</br>[1]&nbsp;"#0080ff"&nbsp;&nbsp;&nbsp;"#ff00ff"&nbsp;&nbsp;&nbsp;"darkgreen"&nbsp;"#ff0000"&nbsp;&nbsp;&nbsp;"orange"&nbsp;&nbsp;&nbsp;</br></br>$fill</br>[1]&nbsp;"#CCFFFF"&nbsp;"#FFCCFF"&nbsp;"#CCFFCC"&nbsp;"#FFE5CC"&nbsp;"#CCE6FF"</br></br>$font</br>[1]&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;1</br></br>$pch</br>[1]&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;1</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"9.1a.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Price&nbsp;(|&nbsp;EngineSize&nbsp;(reorder&nbsp;AirBags&nbsp;Price)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Cylinders</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(!=&nbsp;Cylinders&nbsp;"rotary")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:log&nbsp;2,&nbsp;:tick.number&nbsp;3}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Engine&nbsp;Size&nbsp;(litres)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;Price&nbsp;(1000&nbsp;USD)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;{:text&nbsp;[:!list</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;(base/levels&nbsp;($&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Cylinders))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5])],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;sup-sym,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:space&nbsp;"right"})))</code></div></div><div class="nspbox"><image src="9.1a.png"></image></div><div class="nspbox"><div><h3>Figure 9.1 (alternative, using auto.key)</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"9.1b.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Price&nbsp;(|&nbsp;EngineSize&nbsp;(reorder&nbsp;AirBags&nbsp;Price)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Cylinders</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(!=&nbsp;Cylinders&nbsp;"rotary")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:log&nbsp;2,&nbsp;:tick.number&nbsp;3}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Engine&nbsp;Size&nbsp;(litres)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;Price&nbsp;(1000&nbsp;USD)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:text&nbsp;(r/bra&nbsp;(base/levels&nbsp;($&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Cylinders))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5]),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;true,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:space&nbsp;"right"})))</code></div></div><div class="nspbox"><image src="9.1b.png"></image></div><div class="nspbox"><div><h3>Figure 9.1 (yet another alternative, using drop=TRUE)</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"9.1c.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Price&nbsp;(|&nbsp;EngineSize&nbsp;(reorder&nbsp;AirBags&nbsp;Price)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;(base/subset&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(!=&nbsp;Cylinders&nbsp;"rotary"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'(bra&nbsp;Cylinders&nbsp;nil&nbsp;(=&nbsp;drop&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:log&nbsp;2,&nbsp;:tick.number&nbsp;3}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Engine&nbsp;Size&nbsp;(litres)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;Price&nbsp;(1000&nbsp;USD)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"right"})))</code></div></div><div class="nspbox"><image src="9.1c.png"></image></div><div class="nspbox"><div><h3>Figure 9.2</h3></div></div><div class="nspbox"><div><p>We can't use <code>with</code> here. <code>with</code> creates context before function is called which is not possible in Clojure.</p></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"9.2.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;($&nbsp;~r.MASS/Cars93&nbsp;Price)&nbsp;($&nbsp;~r.MASS/Cars93&nbsp;EngineSize))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:log&nbsp;2,&nbsp;:tick.number&nbsp;3}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;...&nbsp;subscripts]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;pch</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;~my-pch</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;($&nbsp;~r.MASS/Cars93&nbsp;Cylinders)&nbsp;subscripts)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;fill</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;~my-fill</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;($&nbsp;~r.MASS/Cars93&nbsp;AirBags)&nbsp;subscripts)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;x&nbsp;y&nbsp;:pch&nbsp;pch&nbsp;:fill&nbsp;fill&nbsp;:col&nbsp;"black"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"EngineSize"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Price"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;[{:space&nbsp;"right",&nbsp;:adj&nbsp;1}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:text&nbsp;[:!list&nbsp;(base/levels&nbsp;($&nbsp;r.MASS/Cars93&nbsp;'Cylinders))],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;{:pch&nbsp;my-pch}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:text&nbsp;[:!list&nbsp;(base/levels&nbsp;($&nbsp;r.MASS/Cars93&nbsp;'AirBags))],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:points&nbsp;{:pch&nbsp;21,&nbsp;:fill&nbsp;my-fill}}&nbsp;{:rep&nbsp;false}])))</code></div></div><div class="nspbox"><image src="9.2.png"></image></div><div class="nspbox"><div><h3>Figure 9.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;hc1</br>&nbsp;&nbsp;&nbsp;(->&nbsp;USArrests</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/dist&nbsp;:method&nbsp;"canberra")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/hclust)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/as-dendrogram)))</code></div><div class="nspout"><code class="prettyprint lang-clj">'dendrogram'&nbsp;with&nbsp;2&nbsp;branches&nbsp;and&nbsp;50&nbsp;members&nbsp;total,&nbsp;at&nbsp;height&nbsp;2.599707&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;ord-hc1&nbsp;(stats/order-dendrogram&nbsp;hc1))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;[1]&nbsp;34&nbsp;45&nbsp;49&nbsp;15&nbsp;29&nbsp;19&nbsp;12&nbsp;23&nbsp;&nbsp;2&nbsp;&nbsp;6&nbsp;&nbsp;3&nbsp;&nbsp;5&nbsp;24&nbsp;33&nbsp;10&nbsp;42&nbsp;40&nbsp;&nbsp;1&nbsp;18&nbsp;&nbsp;9&nbsp;20&nbsp;31&nbsp;22&nbsp;28&nbsp;43</br>[26]&nbsp;13&nbsp;32&nbsp;11&nbsp;41&nbsp;48&nbsp;17&nbsp;27&nbsp;38&nbsp;16&nbsp;26&nbsp;39&nbsp;&nbsp;7&nbsp;44&nbsp;&nbsp;4&nbsp;25&nbsp;14&nbsp;35&nbsp;30&nbsp;50&nbsp;36&nbsp;46&nbsp;37&nbsp;47&nbsp;&nbsp;8&nbsp;21</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;hc2&nbsp;(stats/reorder&nbsp;hc1&nbsp;(r/bra&nbsp;state-region&nbsp;ord-hc1)))</code></div><div class="nspout"><code class="prettyprint lang-clj">'dendrogram'&nbsp;with&nbsp;2&nbsp;branches&nbsp;and&nbsp;50&nbsp;members&nbsp;total,&nbsp;at&nbsp;height&nbsp;2.599707&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;ord-hc2&nbsp;(stats/order-dendrogram&nbsp;hc2))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;[1]&nbsp;34&nbsp;45&nbsp;49&nbsp;15&nbsp;29&nbsp;19&nbsp;23&nbsp;12&nbsp;&nbsp;2&nbsp;&nbsp;6&nbsp;&nbsp;5&nbsp;&nbsp;3&nbsp;33&nbsp;24&nbsp;42&nbsp;10&nbsp;40&nbsp;18&nbsp;&nbsp;1&nbsp;&nbsp;9&nbsp;20&nbsp;31&nbsp;43&nbsp;13&nbsp;32</br>[26]&nbsp;22&nbsp;28&nbsp;11&nbsp;41&nbsp;48&nbsp;17&nbsp;27&nbsp;38&nbsp;16&nbsp;26&nbsp;39&nbsp;&nbsp;7&nbsp;44&nbsp;37&nbsp;47&nbsp;21&nbsp;&nbsp;8&nbsp;25&nbsp;&nbsp;4&nbsp;14&nbsp;35&nbsp;30&nbsp;50&nbsp;36&nbsp;46</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;region-colors&nbsp;($&nbsp;(lat/trellis-par-get&nbsp;"superpose.polygon")&nbsp;'col))</code></div><div class="nspout"><code class="prettyprint lang-clj">[1]&nbsp;"#CCFFFF"&nbsp;"#FFCCFF"&nbsp;"#CCFFCC"&nbsp;"#FFE5CC"&nbsp;"#CCE6FF"&nbsp;"#FFFFCC"&nbsp;"#FFCCCC"</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"9.3.png")</br>&nbsp;&nbsp;&nbsp;(lat/levelplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;(base/t&nbsp;(base/scale&nbsp;USArrests))&nbsp;nil&nbsp;ord-hc2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:rot&nbsp;90}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:colorkey&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:legend&nbsp;{:right&nbsp;{:fun&nbsp;late/dendrogramGrob,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:args&nbsp;{:x&nbsp;hc2,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ord&nbsp;ord-hc2,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:side&nbsp;"right",</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:size&nbsp;10,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:size.add&nbsp;0.5,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:add&nbsp;{:rect&nbsp;{:col&nbsp;"transparent",</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fill&nbsp;(r/bra&nbsp;region-colors</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state-region)}},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"rectangle"}}}))</code></div></div><div class="nspbox"><image src="9.3.png"></image></div><div class="nspbox"><a id="Chapter-10"> </a><div><h2>Chapter 10</h2></div></div><div class="nspbox"><div><h3>Figure 10.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;Titanic1</br>&nbsp;&nbsp;&nbsp;(->&nbsp;Titanic</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;nil&nbsp;nil&nbsp;"Adult"&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-table)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/as-data-frame)))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;&nbsp;Class&nbsp;&nbsp;&nbsp;&nbsp;Sex&nbsp;Survived&nbsp;Freq</br>1&nbsp;&nbsp;&nbsp;&nbsp;1st&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;118</br>2&nbsp;&nbsp;&nbsp;&nbsp;2nd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;154</br>3&nbsp;&nbsp;&nbsp;&nbsp;3rd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;387</br>4&nbsp;&nbsp;&nbsp;Crew&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;670</br>5&nbsp;&nbsp;&nbsp;&nbsp;1st&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;4</br>6&nbsp;&nbsp;&nbsp;&nbsp;2nd&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;13</br>7&nbsp;&nbsp;&nbsp;&nbsp;3rd&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;89</br>8&nbsp;&nbsp;&nbsp;Crew&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;&nbsp;&nbsp;&nbsp;3</br>9&nbsp;&nbsp;&nbsp;&nbsp;1st&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;57</br>10&nbsp;&nbsp;&nbsp;2nd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;14</br>11&nbsp;&nbsp;&nbsp;3rd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;75</br>12&nbsp;&nbsp;Crew&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;192</br>13&nbsp;&nbsp;&nbsp;1st&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;140</br>14&nbsp;&nbsp;&nbsp;2nd&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;80</br>15&nbsp;&nbsp;&nbsp;3rd&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;76</br>16&nbsp;&nbsp;Crew&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Yes&nbsp;&nbsp;&nbsp;20</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.1.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Class&nbsp;(|&nbsp;Freq&nbsp;Sex))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;Titanic1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Survived</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:stack&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:title&nbsp;"Survived",&nbsp;:columns&nbsp;2})))</code></div></div><div class="nspbox"><image src="10.1.png"></image></div><div class="nspbox"><div><h3>Figure 10.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;Titanic2</br>&nbsp;&nbsp;&nbsp;(->&nbsp;(stats/reshape&nbsp;Titanic1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:direction&nbsp;"wide"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:v.names&nbsp;"Freq"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:idvar&nbsp;["Class"&nbsp;"Sex"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:timevar&nbsp;"Survived")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/names<-&nbsp;["Class"&nbsp;"Sex"&nbsp;"Dead"&nbsp;"Alive"])))</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;Class&nbsp;&nbsp;&nbsp;&nbsp;Sex&nbsp;Dead&nbsp;Alive</br>1&nbsp;&nbsp;&nbsp;1st&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;118&nbsp;&nbsp;&nbsp;&nbsp;57</br>2&nbsp;&nbsp;&nbsp;2nd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;154&nbsp;&nbsp;&nbsp;&nbsp;14</br>3&nbsp;&nbsp;&nbsp;3rd&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;387&nbsp;&nbsp;&nbsp;&nbsp;75</br>4&nbsp;&nbsp;Crew&nbsp;&nbsp;&nbsp;Male&nbsp;&nbsp;670&nbsp;&nbsp;&nbsp;192</br>5&nbsp;&nbsp;&nbsp;1st&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;&nbsp;140</br>6&nbsp;&nbsp;&nbsp;2nd&nbsp;Female&nbsp;&nbsp;&nbsp;13&nbsp;&nbsp;&nbsp;&nbsp;80</br>7&nbsp;&nbsp;&nbsp;3rd&nbsp;Female&nbsp;&nbsp;&nbsp;89&nbsp;&nbsp;&nbsp;&nbsp;76</br>8&nbsp;&nbsp;Crew&nbsp;Female&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;&nbsp;&nbsp;&nbsp;20</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.2.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Class&nbsp;(|&nbsp;(+&nbsp;Dead&nbsp;Alive)&nbsp;Sex))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/barchart&nbsp;Titanic2&nbsp;:stack&nbsp;true&nbsp;:auto.key&nbsp;{:columns&nbsp;2})))</code></div></div><div class="nspbox"><image src="10.2.png"></image></div><div class="nspbox"><div><h3>Figure 10.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.3.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;written&nbsp;(|&nbsp;course&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;r.mlmRev/Gcsemv</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["g"&nbsp;"p"&nbsp;"smooth"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Coursework&nbsp;score"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Written&nbsp;exam&nbsp;score"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[x&nbsp;y&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;x&nbsp;y&nbsp;...)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.rug&nbsp;:x&nbsp;(bra&nbsp;x&nbsp;(is.na&nbsp;y))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;(bra&nbsp;y&nbsp;(is.na&nbsp;x)))))))</code></div></div><div class="nspbox"><image src="10.3.png"></image></div><div class="nspbox"><div><h3>Figure 10.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;written&nbsp;course))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;r.mlmRev/Gcsemv</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:outer&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'gender</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:columns&nbsp;2})))</code></div></div><div class="nspbox"><image src="10.4.png"></image></div><div class="nspbox"><div><h3>Figure 10.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/set-seed&nbsp;200510128)</br>&nbsp;(def&nbsp;x1&nbsp;(let&nbsp;[x1&nbsp;(stats/rexp&nbsp;2000)]&nbsp;(r/bra&nbsp;x1&nbsp;`(>&nbsp;~x1&nbsp;1))))</br>&nbsp;(def&nbsp;x2&nbsp;(stats/rexp&nbsp;1000))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;data)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;(lat/make-groups&nbsp;:x1&nbsp;x1&nbsp;:x2&nbsp;x2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'which</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:distribution&nbsp;stats/qexp</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"exp")))</code></div></div><div class="nspbox"><image src="10.5.png"></image></div><div class="nspbox"><div><h3>Figure 10.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;beavers</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[beavers&nbsp;(lat/make-groups&nbsp;:beaver1&nbsp;beaver1&nbsp;:beaver2&nbsp;beaver2)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;beavers</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'hour</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;beavers</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(+&nbsp;("`%/%`"&nbsp;time&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;24&nbsp;(-&nbsp;day&nbsp;307))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;(%%&nbsp;time&nbsp;100)&nbsp;60))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.6.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;temp&nbsp;(|&nbsp;hour&nbsp;which))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:data&nbsp;beavers</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'activ</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:text&nbsp;["inactive"&nbsp;"active"],&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Time&nbsp;(hours)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Body&nbsp;Temperature&nbsp;(C)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;{:x&nbsp;{:relation&nbsp;"sliced"}})))</code></div></div><div class="nspbox"><image src="10.6.png"></image></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r.utils/head&nbsp;late/USAge-df)</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;Age&nbsp;&nbsp;Sex&nbsp;Year&nbsp;Population</br>1&nbsp;&nbsp;&nbsp;0&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.919</br>2&nbsp;&nbsp;&nbsp;1&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.928</br>3&nbsp;&nbsp;&nbsp;2&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.932</br>4&nbsp;&nbsp;&nbsp;3&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.932</br>5&nbsp;&nbsp;&nbsp;4&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.928</br>6&nbsp;&nbsp;&nbsp;5&nbsp;Male&nbsp;1900&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.921</code></div></div><div class="nspbox"><div><h3>Figure 10.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.7.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Population&nbsp;(|&nbsp;Age&nbsp;(factor&nbsp;Year)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/USAge-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Sex</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["l"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;false,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Population&nbsp;(millions)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(%in%&nbsp;Year&nbsp;(seq&nbsp;1905&nbsp;1975&nbsp;:by&nbsp;10)))))</code></div></div><div class="nspbox"><image src="10.7.png"></image></div><div class="nspbox"><div><h3>Figure 10.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.8.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Population&nbsp;(|&nbsp;Year&nbsp;(factor&nbsp;Age)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/USAge-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Sex</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;"l"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip.left&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Population&nbsp;(millions)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;false,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(%in%&nbsp;Age&nbsp;[0&nbsp;10&nbsp;20]))))</code></div></div><div class="nspbox"><image src="10.8.png"></image></div><div class="nspbox"><div><h3>Figure 10.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.9.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;Population&nbsp;(|&nbsp;Year&nbsp;(factor&nbsp;(-&nbsp;Year&nbsp;Age))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/USAge-df</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'Sex</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subset&nbsp;'(%in%&nbsp;(-&nbsp;Year&nbsp;Age)&nbsp;(colon&nbsp;1894&nbsp;1905))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["g"&nbsp;"l"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Population&nbsp;(millions)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;false,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2})))</code></div></div><div class="nspbox"><image src="10.9.png"></image></div><div class="nspbox"><div><h3>Figure 10.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.10.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;stations&nbsp;mag)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:jitter.x&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"smooth"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Number&nbsp;of&nbsp;stations&nbsp;reporting")))</code></div></div><div class="nspbox"><image src="10.10.png"></image></div><div class="nspbox"><div><h3>Figure 10.11</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Mag</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/equal-count&nbsp;($&nbsp;quakes&nbsp;'mag)&nbsp;:number&nbsp;10&nbsp;:overlap&nbsp;0.2)))</br>&nbsp;(def&nbsp;ps-mag</br>&nbsp;&nbsp;&nbsp;(g/plot&nbsp;($&nbsp;quakes&nbsp;'Mag)&nbsp;:ylab&nbsp;"Level"&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter)"))</br>&nbsp;(def&nbsp;bwp-quakes</br>&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;'(formula&nbsp;stations&nbsp;Mag)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Number&nbsp;of&nbsp;stations&nbsp;reporting"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.11.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;bwp-quakes&nbsp;:position&nbsp;[0&nbsp;0&nbsp;1&nbsp;0.65])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;ps-mag&nbsp;:position&nbsp;[0&nbsp;0.65&nbsp;1&nbsp;1]&nbsp;:newpage&nbsp;false)))</code></div></div><div class="nspbox"><image src="10.11.png"></image></div><div class="nspbox"><div><h3>Figure 10.12</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.12.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(sqrt&nbsp;stations)&nbsp;Mag)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:limits&nbsp;(->&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;'Mag)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/levels</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base/as-character),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:rot&nbsp;60}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;'(expression&nbsp;(sqrt&nbsp;"Number&nbsp;of&nbsp;stations")))))</code></div></div><div class="nspbox"><image src="10.12.png"></image></div><div class="nspbox"><div><h3>Figure 10.13</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.13.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;(sqrt&nbsp;stations)&nbsp;Mag))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;3</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;lat/prepanel-qqmathline</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;(lat/strip-custom&nbsp;:strip.levels&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip.names&nbsp;false)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Standard&nbsp;normal&nbsp;quantiles"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;'(expression&nbsp;(sqrt&nbsp;"Number&nbsp;of&nbsp;stations")))))</code></div></div><div class="nspbox"><image src="10.13.png"></image></div><div class="nspbox"><div><h3>Figure 10.14</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.14.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(sqrt&nbsp;stations)&nbsp;mag)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;lat/panel-bwplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:horizontal&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:box.ratio&nbsp;0.05</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Magnitude&nbsp;(Richter)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;'(expression&nbsp;(sqrt&nbsp;"Number&nbsp;of&nbsp;stations")))))</code></div></div><div class="nspbox"><image src="10.14.png"></image></div><div class="nspbox"><div><h3>Figure 10.15</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[sd&nbsp;(base/data-frame&nbsp;:name&nbsp;state-name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:area&nbsp;(r/bra&nbsp;state-x77&nbsp;nil&nbsp;"Area")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:population</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;state-x77&nbsp;nil&nbsp;"Population")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:region&nbsp;state-region)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;sd&nbsp;'density&nbsp;(base/with&nbsp;sd&nbsp;'(/&nbsp;population&nbsp;area)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.15.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(reorder&nbsp;name&nbsp;density)&nbsp;density)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Population&nbsp;Density&nbsp;(thousands&nbsp;per&nbsp;square&nbsp;mile)")))</code></div></div><div class="nspbox"><image src="10.15.png"></image></div><div class="nspbox"><div><h3>Figure 10.16</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/shingle&nbsp;($&nbsp;state-density&nbsp;'density)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:intervals</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/rbind&nbsp;[0&nbsp;0.2]&nbsp;[0.2&nbsp;1]))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.16.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;(reorder&nbsp;name&nbsp;density)&nbsp;(|&nbsp;density&nbsp;Density))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:latout&nbsp;[2&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:levels.fos&nbsp;(r/colon&nbsp;1&nbsp;50)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;"free"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:between&nbsp;{:x&nbsp;0.5}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Population&nbsp;Density&nbsp;(thousands&nbsp;per&nbsp;square&nbsp;mile)"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:layout.widths&nbsp;{:panel&nbsp;[2&nbsp;1]}})))</code></div></div><div class="nspbox"><image src="10.16.png"></image></div><div class="nspbox"><div><h3>Figure 10.17</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;cut-and-stack</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;:number&nbsp;6&nbsp;:overlap&nbsp;0.1&nbsp;:type&nbsp;"l"&nbsp;:xlab&nbsp;"Time"&nbsp;:ylab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(deparse&nbsp;(substitute&nbsp;x))&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;time&nbsp;(if&nbsp;(is.ts&nbsp;x)&nbsp;(time&nbsp;x)&nbsp;(seq_along&nbsp;x)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;Time</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(equal.count&nbsp;(as.numeric&nbsp;time)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:number&nbsp;number</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:overlap&nbsp;overlap))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(xyplot&nbsp;(formula&nbsp;(as.numeric&nbsp;x)&nbsp;(|&nbsp;time&nbsp;Time))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xlab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ylab</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default.scales</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:x&nbsp;{:relation&nbsp;"free"},&nbsp;:y&nbsp;{:relation&nbsp;"free"}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.17.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cut-and-stack&nbsp;(r/bra&nbsp;EuStockMarkets&nbsp;nil&nbsp;"DAX")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:draw&nbsp;false},&nbsp;:y&nbsp;{:rot&nbsp;0}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"EuStockMarkets[,\\\"DAX\\\"]"))</code></div></div><div class="nspbox"><image src="10.17.png"></image></div><div class="nspbox"><div><h3>Figure 10.18</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;bdp1</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(as.character&nbsp;variety)&nbsp;(|&nbsp;yield&nbsp;(as.character&nbsp;site)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;lat/barley</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;6]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"top",&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;:strip&nbsp;false&nbsp;:strip.left&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"fill")))</br>&nbsp;(def&nbsp;bdp2</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;variety&nbsp;(|&nbsp;yield&nbsp;site))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;lat/barley</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;6]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:space&nbsp;"top",&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;;&nbsp;:strip&nbsp;false&nbsp;:strip.left&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.18.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;bdp1&nbsp;:split&nbsp;[1&nbsp;1&nbsp;2&nbsp;1])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;bdp2&nbsp;:split&nbsp;[2&nbsp;1&nbsp;2&nbsp;1]&nbsp;:newpage&nbsp;false)))</code></div></div><div class="nspbox"><image src="10.18.png"></image></div><div class="nspbox"><div><h3>Figure 10.19</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[sd&nbsp;(base/data-frame&nbsp;:name&nbsp;state-name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:area&nbsp;(r/bra&nbsp;state-x77&nbsp;nil&nbsp;"Area")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:population</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;state-x77&nbsp;nil&nbsp;"Population")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:region&nbsp;state-region)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;sd&nbsp;'density&nbsp;(base/with&nbsp;sd&nbsp;'(/&nbsp;population&nbsp;area)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.19.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(reorder&nbsp;name&nbsp;density)&nbsp;(*&nbsp;1000&nbsp;density))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;{:x&nbsp;{:log&nbsp;10}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Density&nbsp;(per&nbsp;square&nbsp;mile)")))</code></div></div><div class="nspbox"><image src="10.19.png"></image></div><div class="nspbox"><div><h3>Figure 10.20</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;(->&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'region</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;state-density&nbsp;'(reorder&nbsp;region&nbsp;density&nbsp;median)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(reorder&nbsp;(reorder&nbsp;name&nbsp;density)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as.numeric&nbsp;region))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.20.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;name&nbsp;(|&nbsp;(*&nbsp;1000&nbsp;density)&nbsp;region))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;state-density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip.left&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;4]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:log&nbsp;10},&nbsp;:y&nbsp;{:relation&nbsp;"free"}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Density&nbsp;(per&nbsp;square&nbsp;mile)")))</code></div></div><div class="nspbox"><image src="10.20.png"></image></div><div class="nspbox"><div><h3>Figure 10.21</h3></div></div><div class="nspbox"><div><p><code>late/resizePanels</code> works only when using viewport</p></div></div><div class="nspbox"><div><h3>Figure 10.22</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.22.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;rate.male&nbsp;(|&nbsp;rate.female&nbsp;state))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/USCancerRates</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:index.cond&nbsp;'(function&nbsp;[x&nbsp;y]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(median&nbsp;(-&nbsp;y&nbsp;x)&nbsp;:na.rm&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:log&nbsp;2,&nbsp;:at&nbsp;[75&nbsp;150&nbsp;300&nbsp;600]}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.grid&nbsp;:h&nbsp;-1&nbsp;:v&nbsp;-1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.abline&nbsp;0&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.xyplot&nbsp;...)))))</code></div></div><div class="nspbox"><image src="10.22.png"></image></div><div class="nspbox"><div><h3>Figure 10.23</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;strip-style4</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[...&nbsp;style]&nbsp;(strip.default&nbsp;...&nbsp;:style&nbsp;4))))</code></div><div class="nspout"><code class="prettyprint lang-clj">function&nbsp;(...,&nbsp;style)&nbsp;</br>{</br>&nbsp;&nbsp;&nbsp;&nbsp;strip.default(...,&nbsp;style&nbsp;=&nbsp;4)</br>}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.23.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'gender</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["l"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;false,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;strip-style4)))</code></div></div><div class="nspbox"><image src="10.23.png"></image></div><div class="nspbox"><div><h3>Figure 10.24</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;strip-combined</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[which.given&nbsp;which.panel&nbsp;factor.levels&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(==&nbsp;which.given&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(do&nbsp;(panel.rect&nbsp;0&nbsp;0&nbsp;1&nbsp;1&nbsp;:col&nbsp;"grey90"&nbsp;:border&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.text&nbsp;:x&nbsp;0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;0.5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pos&nbsp;4</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lab&nbsp;(bra&nbsp;factor.levels</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;which.panel&nbsp;which.given)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(==&nbsp;which.given&nbsp;2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.text&nbsp;:x&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;0.5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pos&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lab&nbsp;(bra&nbsp;factor.levels</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;which.panel&nbsp;which.given)))))))</code></div><div class="nspout"><code class="prettyprint lang-clj">function&nbsp;(which.given,&nbsp;which.panel,&nbsp;factor.levels,&nbsp;...)&nbsp;</br>{</br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((which.given&nbsp;==&nbsp;1))&nbsp;{</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel.rect(0,&nbsp;0,&nbsp;1,&nbsp;1,&nbsp;col&nbsp;=&nbsp;"grey90",&nbsp;border&nbsp;=&nbsp;1)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel.text(x&nbsp;=&nbsp;0,&nbsp;y&nbsp;=&nbsp;0.5,&nbsp;pos&nbsp;=&nbsp;4,&nbsp;lab&nbsp;=&nbsp;factor.levels[which.panel[which.given]])</br>&nbsp;&nbsp;&nbsp;&nbsp;}</br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;((which.given&nbsp;==&nbsp;2))&nbsp;{</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;panel.text(x&nbsp;=&nbsp;1,&nbsp;y&nbsp;=&nbsp;0.5,&nbsp;pos&nbsp;=&nbsp;2,&nbsp;lab&nbsp;=&nbsp;factor.levels[which.panel[which.given]])</br>&nbsp;&nbsp;&nbsp;&nbsp;}</br>}</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"10.24.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(+&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score))&nbsp;gender))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qqmath&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["l"&nbsp;"g"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;strip-combined</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.strip.text&nbsp;{:lines&nbsp;0.5}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Standard&nbsp;normal&nbsp;quantiles"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Average&nbsp;GCSE&nbsp;score")))</code></div></div><div class="nspbox"><image src="10.24.png"></image></div><div class="nspbox"><div><h3>Figure 10.25</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;barley</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[morris&nbsp;(r/r==&nbsp;($&nbsp;lat/barley&nbsp;'site)&nbsp;"Morris")]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;`(<-&nbsp;(bra&nbsp;($&nbsp;barley&nbsp;year)&nbsp;~morris)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ifelse&nbsp;(==&nbsp;(bra&nbsp;($&nbsp;barley&nbsp;year)&nbsp;~morris)&nbsp;"1931")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1932"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1931")))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;'barley)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"10.25.png")</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;(sqrt&nbsp;(abs&nbsp;(residuals&nbsp;(lm&nbsp;(formula</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(+&nbsp;variety&nbsp;year&nbsp;site))))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;site)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/stripplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data&nbsp;barley</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;'year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:jitter.data&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:auto.key&nbsp;{:points&nbsp;true,&nbsp;:lines&nbsp;true,&nbsp;:columns&nbsp;2}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"a"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fun&nbsp;stats/median</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;(r&nbsp;"(expression(abs('Residual&nbsp;Barley&nbsp;Yield')^{1/2}))"))))</code></div></div><div class="nspbox"><image src="10.25.png"></image></div><div class="nspbox"><a id="Chapter-11"> </a><div><h2>Chapter 11</h2></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(r.utils/methods&nbsp;:class&nbsp;"trellis"))</code></div><div class="nspout"><code class="prettyprint lang-clj">["[.trellis"</br>&nbsp;"+.trellis"</br>&nbsp;"as.layer.trellis"</br>&nbsp;"c.trellis"</br>&nbsp;"dim.trellis"</br>&nbsp;"dimnames.trellis"</br>&nbsp;"dimnames<-.trellis"</br>&nbsp;"plot.trellis"</br>&nbsp;"print.trellis"</br>&nbsp;"summary.trellis"</br>&nbsp;"t.trellis"</br>&nbsp;"tmd.trellis"</br>&nbsp;"update.trellis"]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(r.utils/methods&nbsp;:class&nbsp;"shingle"))</code></div><div class="nspout"><code class="prettyprint lang-clj">["[.shingle"</br>&nbsp;"as.data.frame.shingle"</br>&nbsp;"plot.shingle"</br>&nbsp;"print.shingle"</br>&nbsp;"summary.shingle"]</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r->clj&nbsp;(r.utils/methods&nbsp;:generic.function&nbsp;"barchart"))</code></div><div class="nspout"><code class="prettyprint lang-clj">["barchart.array"</br>&nbsp;"barchart.default"</br>&nbsp;"barchart.formula"</br>&nbsp;"barchart.matrix"</br>&nbsp;"barchart.numeric"</br>&nbsp;"barchart.table"]</code></div></div><div class="nspbox"><div><h3>Figure 11.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;dp-uspe</br>&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;(base/t&nbsp;USPersonalExpenditure)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:index.cond&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(median&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;5]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"h"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Expenditure&nbsp;(billion&nbsp;dollars)"))</br>&nbsp;(def&nbsp;dp-uspe-log</br>&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;(base/t&nbsp;USPersonalExpenditure)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:groups&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:index.cond&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;(median&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;5]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:log&nbsp;2}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;"Expenditure&nbsp;(billion&nbsp;dollars)"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"11.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fn&nbsp;[]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;dp-uspe&nbsp;:split&nbsp;[1&nbsp;1&nbsp;2&nbsp;1]&nbsp;:more&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(g/plot&nbsp;dp-uspe-log&nbsp;:split&nbsp;[2&nbsp;1&nbsp;2&nbsp;1]&nbsp;:more&nbsp;false)))</code></div></div><div class="nspbox"><image src="11.1.png"></image></div><div class="nspbox"><div><h3>Figure 11.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;state</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[state&nbsp;(base/data-frame&nbsp;state-x77&nbsp;state-region&nbsp;state-name)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;state</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'state.name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;state</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(reorder&nbsp;(reorder&nbsp;state.name&nbsp;Frost)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(as.numeric&nbsp;state.region))))))</br>&nbsp;(def&nbsp;dpfrost</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;state.name&nbsp;(|&nbsp;Frost&nbsp;(reorder&nbsp;state.region&nbsp;Frost)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/dotplot&nbsp;:data&nbsp;state</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[1&nbsp;4]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:y&nbsp;{:relation&nbsp;"free"}})))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(summary&nbsp;dpfrost)</code></div><div class="nspout"><code class="prettyprint lang-clj"></br>Call:</br>dotplot((state.name&nbsp;~&nbsp;Frost&nbsp;|&nbsp;reorder(state.region,&nbsp;Frost)),&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;.MEM$x300cac4d311d462b,&nbsp;layout&nbsp;=&nbsp;c(1,&nbsp;4),&nbsp;scales&nbsp;=&nbsp;list(y&nbsp;=&nbsp;list(relation&nbsp;=&nbsp;"free")))</br></br>Number&nbsp;of&nbsp;observations:</br>reorder(state.region,&nbsp;Frost)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;South&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;West&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Northeast&nbsp;North&nbsp;Central&nbsp;</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"11.2.png")</br>&nbsp;&nbsp;&nbsp;#(g/plot&nbsp;dpfrost&nbsp;:panel.height&nbsp;{:x&nbsp;[16&nbsp;13&nbsp;9&nbsp;12],&nbsp;:unit&nbsp;"null"}))</code></div></div><div class="nspbox"><image src="11.2.png"></image></div><div class="nspbox"><div><h3>Figure 11.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"11.3.png")</br>&nbsp;&nbsp;&nbsp;(r/bra&nbsp;(stats/update&nbsp;(lat/trellis-last-object)&nbsp;:layout&nbsp;[1&nbsp;1])&nbsp;2))</code></div></div><div class="nspbox"><image src="11.3.png"></image></div><div class="nspbox"><div><h3>Figure 11.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;npanel&nbsp;12)</br>&nbsp;(def&nbsp;rot</br>&nbsp;&nbsp;&nbsp;{:z&nbsp;(base/seq&nbsp;0&nbsp;30&nbsp;:length&nbsp;npanel),</br>&nbsp;&nbsp;&nbsp;&nbsp;:x&nbsp;(base/seq&nbsp;0&nbsp;-80&nbsp;:length&nbsp;npanel)})</br>&nbsp;(def&nbsp;quake-locs</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(formula&nbsp;depth&nbsp;(+&nbsp;long&nbsp;lat))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud&nbsp;quakes</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;1.5</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;'(function&nbsp;[...&nbsp;screen]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;pn&nbsp;(panel.number))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.cloud&nbsp;...</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:z&nbsp;(bra&nbsp;~(:z&nbsp;rot)&nbsp;pn),</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:x&nbsp;(bra&nbsp;~(:x&nbsp;rot)&nbsp;pn)}))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;[690&nbsp;30]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:axis.line&nbsp;{:col&nbsp;"transparent"}})))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"11.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;quake-locs&nbsp;(base/rep&nbsp;1&nbsp;npanel)))</code></div></div><div class="nspbox"><image src="11.4.png"></image></div><div class="nspbox"><div><h3>Figure 11.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;chem-qq</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;gender&nbsp;(|&nbsp;gcsescore&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/qq&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:f.value&nbsp;(stats/ppoints&nbsp;100)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;(lat/strip-custom&nbsp;:style&nbsp;5))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"11.5.png")&nbsp;(lat/tmd&nbsp;chem-qq))</code></div></div><div class="nspbox"><image src="11.5.png"></image></div><div class="nspbox"><div><h3>Figure 11.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;baxy</br>&nbsp;&nbsp;&nbsp;(do&nbsp;(<-&nbsp;'baxy</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(log10&nbsp;counts)&nbsp;(+&nbsp;(|&nbsp;hour&nbsp;month)&nbsp;weekday))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;late/biocAccess</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:type&nbsp;["p"&nbsp;"a"]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:as.table&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:pch&nbsp;"."</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.line&nbsp;"black")))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;'(<-&nbsp;($&nbsp;(dimnames&nbsp;baxy)&nbsp;month)&nbsp;(bra&nbsp;month.name&nbsp;[1&nbsp;2&nbsp;3&nbsp;4&nbsp;5])))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r&nbsp;'baxy)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"11.6.png")&nbsp;(late/useOuterStrips&nbsp;baxy))</code></div></div><div class="nspbox"><image src="11.6.png"></image></div><div class="nspbox"><a id="Chapter-12-skipped"> </a><div><h2>Chapter 12 (skipped)</h2></div></div><div class="nspbox"><div><p>Interactive charts - skipped.</p></div></div><div class="nspbox"><a id="Chapter-13"> </a><div><h2>Chapter 13</h2></div></div><div class="nspbox"><div><h3>Figure 13.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-hypotrochoid</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[r&nbsp;d&nbsp;:cycles&nbsp;10&nbsp;:density&nbsp;30]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(missing&nbsp;r)&nbsp;(<-&nbsp;r&nbsp;(runif&nbsp;1&nbsp;0.25&nbsp;0.75)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(missing&nbsp;d)&nbsp;(<-&nbsp;d&nbsp;(runif&nbsp;1&nbsp;(*&nbsp;r&nbsp;0.25)&nbsp;r)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;t&nbsp;(*&nbsp;2&nbsp;pi&nbsp;(seq&nbsp;0&nbsp;cycles&nbsp;:by&nbsp;(/&nbsp;1&nbsp;density))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;x&nbsp;(+&nbsp;(*&nbsp;(-&nbsp;1&nbsp;r)&nbsp;(cos&nbsp;t))&nbsp;(*&nbsp;d&nbsp;(cos&nbsp;(/&nbsp;(*&nbsp;(-&nbsp;1&nbsp;r)&nbsp;t)&nbsp;r)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;y&nbsp;(-&nbsp;(*&nbsp;(-&nbsp;1&nbsp;r)&nbsp;(sin&nbsp;t))&nbsp;(*&nbsp;d&nbsp;(sin&nbsp;(/&nbsp;(*&nbsp;(-&nbsp;1&nbsp;r)&nbsp;t)&nbsp;r)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.lines&nbsp;x&nbsp;y))))</br>&nbsp;(def&nbsp;panel-hypocycloid</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;y&nbsp;:cycles&nbsp;x&nbsp;:density&nbsp;30]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~panel-hypotrochoid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:r</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;x&nbsp;y)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:d</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;x&nbsp;y)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cycles</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cycles</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;density))))</br>&nbsp;(def&nbsp;prepanel-hypocycloid</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;y]&nbsp;{:xlim&nbsp;[-1&nbsp;1],&nbsp;:ylim&nbsp;[-1&nbsp;1]})))</br>&nbsp;(def&nbsp;grid</br>&nbsp;&nbsp;&nbsp;(let&nbsp;[g&nbsp;(base/data-frame&nbsp;:p&nbsp;(r/colon&nbsp;11&nbsp;30)&nbsp;:q&nbsp;10)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;g&nbsp;'k&nbsp;(base/with&nbsp;g&nbsp;'(factor&nbsp;(/&nbsp;p&nbsp;q))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;p&nbsp;(|&nbsp;q&nbsp;k))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;grid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;prepanel-hypocycloid</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-hypocycloid)))</code></div></div><div class="nspbox"><image src="13.1.png"></image></div><div class="nspbox"><div><h3>Figure 13.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;p</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;[-1&nbsp;1]&nbsp;[-1&nbsp;1])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;:aspect&nbsp;1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cycles&nbsp;15</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-hypotrochoid)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/set-seed&nbsp;20070706)</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.2.png")&nbsp;(r/bra&nbsp;p&nbsp;(base/rep&nbsp;1&nbsp;42)))</code></div></div><div class="nspbox"><image src="13.2.png"></image></div><div class="nspbox"><div><h3>Figure 13.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;prepanel-ls</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;:n&nbsp;50&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;fit&nbsp;(logspline&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;xx&nbsp;(do.breaks&nbsp;(range&nbsp;x)&nbsp;n))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;yy&nbsp;(dlogspline&nbsp;xx&nbsp;fit))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:ylim&nbsp;[0&nbsp;(max&nbsp;yy)]})))</br>&nbsp;(def&nbsp;panel-ls</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;:n&nbsp;50&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;fit&nbsp;(logspline&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;xx&nbsp;(do.breaks&nbsp;(range&nbsp;x)&nbsp;n))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;yy&nbsp;(dlogspline&nbsp;xx&nbsp;fit))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.lines&nbsp;xx&nbsp;yy&nbsp;...))))</br>&nbsp;(def&nbsp;faithful</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;faithful</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Eruptions</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/equal-count&nbsp;($&nbsp;faithful&nbsp;'eruptions)&nbsp;4)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;nil&nbsp;(|&nbsp;waiting&nbsp;Eruptions))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/densityplot&nbsp;:data&nbsp;faithful</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:prepanel&nbsp;prepanel-ls</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-ls)))</code></div></div><div class="nspbox"><image src="13.3.png"></image></div><div class="nspbox"><div><h3>Figure 13.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-bwtufte</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;:coef&nbsp;1.5&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;x&nbsp;(as.numeric&nbsp;x))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ux&nbsp;(sort&nbsp;(unique&nbsp;x)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;blist</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tapply&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(factor&nbsp;x&nbsp;:levels&nbsp;ux)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxplot.stats</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:coef&nbsp;coef</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:do.out&nbsp;false))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;blist.stats&nbsp;(t&nbsp;(sapply&nbsp;blist&nbsp;"[["&nbsp;"stats")))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;blist.out&nbsp;(lapply&nbsp;blist&nbsp;"[["&nbsp;"out"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.points&nbsp;:y&nbsp;(bra&nbsp;blist.stats&nbsp;nil&nbsp;3)&nbsp;:x&nbsp;ux&nbsp;:pch&nbsp;16&nbsp;...)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.segments</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:x0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rep&nbsp;ux&nbsp;2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y0</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(bra&nbsp;blist.stats&nbsp;nil&nbsp;1)&nbsp;(bra&nbsp;blist.stats&nbsp;nil&nbsp;5)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:x1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rep&nbsp;ux&nbsp;2)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[(bra&nbsp;blist.stats&nbsp;nil&nbsp;2)&nbsp;(bra&nbsp;blist.stats&nbsp;nil&nbsp;4)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"13.4.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(**&nbsp;gcsescore&nbsp;2.34)&nbsp;(|&nbsp;gender&nbsp;(factor&nbsp;score)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/bwplot&nbsp;r.mlmRev/Chem97</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-bwtufte</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:layout&nbsp;[6&nbsp;1]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;"Transformed&nbsp;GCSE&nbsp;score")))</code></div></div><div class="nspbox"><image src="13.4.png"></image></div><div class="nspbox"><div><h3>Figure 13.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;cor-cars93</br>&nbsp;&nbsp;&nbsp;(stats/cor&nbsp;(r/bra&nbsp;r.MASS/Cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/r!&nbsp;(base/sapply&nbsp;r.MASS/Cars93&nbsp;base/is-factor)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:use</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"pair"))</br>&nbsp;(def&nbsp;ord</br>&nbsp;&nbsp;&nbsp;(->&nbsp;cor-cars93</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats/dist</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats/hclust</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats/as-dendrogram</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats/order-dendrogram))</br>&nbsp;(def&nbsp;panel-corrgram</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;z&nbsp;subscripts&nbsp;at&nbsp;:level&nbsp;0.9&nbsp;:label&nbsp;false&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(require&nbsp;"ellipse"&nbsp;:quietly&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;x&nbsp;(bra&nbsp;(as.numeric&nbsp;x)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;y&nbsp;(bra&nbsp;(as.numeric&nbsp;y)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;z&nbsp;(bra&nbsp;(as.numeric&nbsp;z)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;zcol&nbsp;(level.colors&nbsp;z&nbsp;:at&nbsp;at&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(for&nbsp;[i&nbsp;(seq&nbsp;:along&nbsp;z)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ell</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ellipse&nbsp;(bra&nbsp;z&nbsp;i)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:level&nbsp;level</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:npoints&nbsp;50</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;[0.2&nbsp;0.2]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:centre&nbsp;[(bra&nbsp;x&nbsp;i)&nbsp;(bra&nbsp;y&nbsp;i)]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.polygon&nbsp;ell</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;zcol&nbsp;[i])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:border</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;zcol&nbsp;i)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;label</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.text&nbsp;:x&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lab&nbsp;(*&nbsp;100&nbsp;(round&nbsp;z&nbsp;2))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cex&nbsp;0.8</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;(ifelse&nbsp;(<&nbsp;z&nbsp;0)&nbsp;"white"&nbsp;"black"))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;(r/bra&nbsp;cor-cars93&nbsp;ord&nbsp;ord)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;(lat/do-breaks&nbsp;[-1.01&nbsp;1.01]&nbsp;20)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:colorkey&nbsp;{:space&nbsp;"top"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:x&nbsp;{:rot&nbsp;90}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-corrgram</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:label&nbsp;true))</code></div></div><div class="nspbox"><image src="13.5.png"></image></div><div class="nspbox"><div><h3>Figure 13.6</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-corrgram-2</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;z&nbsp;subscripts&nbsp;:at&nbsp;(pretty&nbsp;z)&nbsp;:scale&nbsp;0.8&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(require&nbsp;"grid"&nbsp;:quietly&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;x&nbsp;(bra&nbsp;(as.numeric&nbsp;x)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;y&nbsp;(bra&nbsp;(as.numeric&nbsp;y)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;z&nbsp;(bra&nbsp;(as.numeric&nbsp;z)&nbsp;subscripts))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;zcol&nbsp;(level.colors&nbsp;z&nbsp;:at&nbsp;at&nbsp;...))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(for&nbsp;[i&nbsp;(seq&nbsp;:along&nbsp;z)]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;lims&nbsp;(range&nbsp;0&nbsp;(bra&nbsp;z&nbsp;i)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;tval</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(*&nbsp;2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pi</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(seq&nbsp;:from&nbsp;(bra&nbsp;lims&nbsp;1)&nbsp;:to&nbsp;(bra&nbsp;lims&nbsp;2)&nbsp;:by&nbsp;0.01)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(grid.circle&nbsp;:x&nbsp;(bra&nbsp;x&nbsp;i)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;(bra&nbsp;y&nbsp;i)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:r&nbsp;(*&nbsp;0.5&nbsp;scale)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default.units&nbsp;"native")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(grid.polygon&nbsp;:x&nbsp;(+&nbsp;(bra&nbsp;x&nbsp;i)&nbsp;(*&nbsp;0.5&nbsp;scale&nbsp;[0&nbsp;(sin&nbsp;tval)]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;(+&nbsp;(bra&nbsp;y&nbsp;i)&nbsp;(*&nbsp;0.5&nbsp;scale&nbsp;[0&nbsp;(cos&nbsp;tval)]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default.units&nbsp;"native"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:gp&nbsp;(gpar&nbsp;:fill&nbsp;(bra&nbsp;zcol&nbsp;i)))))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.6.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/levelplot&nbsp;(r/bra&nbsp;cor-cars93&nbsp;ord&nbsp;ord)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:at&nbsp;(lat/do-breaks&nbsp;[-1.01&nbsp;1.01]&nbsp;101)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;panel-corrgram-2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scale&nbsp;{:x&nbsp;{:rot&nbsp;90}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:colorkey&nbsp;{:space&nbsp;"top"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col.regions&nbsp;(dev/colorRampPalette</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;["red"&nbsp;"white"&nbsp;"blue"])))</code></div></div><div class="nspbox"><image src="13.6.png"></image></div><div class="nspbox"><div><h3>Figure 13.7</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-3d-contour</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;z&nbsp;rot.mat&nbsp;distance&nbsp;:nlevels&nbsp;20&nbsp;zlim.scaled&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;add.line&nbsp;(trellis.par.get&nbsp;"add.line"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.3dwire&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;z</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rot.mat</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim.scaled</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zlim.scaled</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;clines</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(contourLines&nbsp;x</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(matrix&nbsp;z&nbsp;:nrow&nbsp;(length&nbsp;x)&nbsp;:byrow&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:nlevels</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nlevels))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(for&nbsp;[ll&nbsp;clines]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;m</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ltransform3dto3d&nbsp;(rbind&nbsp;ll$x&nbsp;ll$y&nbsp;(bra&nbsp;zlim.scaled&nbsp;2))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rot.mat</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.lines&nbsp;(bra&nbsp;m&nbsp;1&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(bra&nbsp;m&nbsp;2&nbsp;nil)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;add.line$col</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;add.line$lty</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;add.line$lwd)))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"13.7.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/wireframe&nbsp;'volcano</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlim&nbsp;[90&nbsp;250]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:nlevels&nbsp;10</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;[61/87&nbsp;0.3]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:shade&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.3d.wireframe&nbsp;panel-3d-contour</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;20,&nbsp;:x&nbsp;-60}))</code></div></div><div class="nspbox"><image src="13.7.png"></image></div><div class="nspbox"><div><h3>Figure 13.8</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;county-map&nbsp;(r.maps/map&nbsp;"county"&nbsp;:plot&nbsp;false&nbsp;:fill&nbsp;true))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(base/summary&nbsp;county-map)</code></div><div class="nspout"><code class="prettyprint lang-clj">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Length&nbsp;Class&nbsp;&nbsp;Mode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;91033&nbsp;&nbsp;-none-&nbsp;numeric&nbsp;&nbsp;</br>y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;91033&nbsp;&nbsp;-none-&nbsp;numeric&nbsp;&nbsp;</br>range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;&nbsp;-none-&nbsp;numeric&nbsp;&nbsp;</br>names&nbsp;&nbsp;3085&nbsp;&nbsp;-none-&nbsp;character</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;ancestry</br>&nbsp;&nbsp;&nbsp;(as->&nbsp;(base/subset&nbsp;late/ancestry&nbsp;'(!&nbsp;(duplicated&nbsp;county)))&nbsp;a</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/rownames<-&nbsp;a&nbsp;($&nbsp;a&nbsp;'county))))</br>&nbsp;(def&nbsp;freq&nbsp;(base/table&nbsp;($&nbsp;ancestry&nbsp;'top)))</br>&nbsp;(def&nbsp;keep-names&nbsp;(r/bra&nbsp;(base/names&nbsp;freq)&nbsp;(r/r>&nbsp;freq&nbsp;10)))</br>&nbsp;(def&nbsp;ancestry</br>&nbsp;&nbsp;&nbsp;($<-&nbsp;ancestry</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'mode</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(base/with&nbsp;ancestry</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(factor</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ifelse&nbsp;(%in%&nbsp;top&nbsp;~keep-names)&nbsp;top&nbsp;"Other")))))</br>&nbsp;(def&nbsp;modal-ancestry&nbsp;(r/bra&nbsp;ancestry&nbsp;($&nbsp;county-map&nbsp;'names)&nbsp;"mode"))</br>&nbsp;(def&nbsp;colors</br>&nbsp;&nbsp;&nbsp;(r.RColorBrewer/brewer-pal&nbsp;:n&nbsp;(base/nlevels&nbsp;($&nbsp;ancestry&nbsp;'mode))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"Pastel1"))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"13.8.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;y&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;county-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"iso"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.settings&nbsp;{:axis.line&nbsp;{:col&nbsp;"transparent"}}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;(r/bra&nbsp;colors&nbsp;modal-ancestry)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:border&nbsp;'NA</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel&nbsp;lat/panel-polygon</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;{:text&nbsp;[:!list&nbsp;(base/levels&nbsp;modal-ancestry)&nbsp;:adj</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:rectangles&nbsp;{:col&nbsp;colors},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:x&nbsp;1,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:y&nbsp;0,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:corner&nbsp;[1&nbsp;0]})))</code></div></div><div class="nspbox"><image src="13.8.png"></image></div><div class="nspbox"><div><h3>Figure 13.9</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;rad&nbsp;(r&nbsp;'(function&nbsp;[x]&nbsp;(/&nbsp;(*&nbsp;pi&nbsp;x)&nbsp;180))))</br>&nbsp;(def&nbsp;county-map</br>&nbsp;&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;county-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'xx&nbsp;(base/with&nbsp;county-map&nbsp;'(*&nbsp;(cos&nbsp;(~rad&nbsp;x))&nbsp;(cos&nbsp;(~rad&nbsp;y)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'yy&nbsp;(base/with&nbsp;county-map&nbsp;'(*&nbsp;(sin&nbsp;(~rad&nbsp;x))&nbsp;(cos&nbsp;(~rad&nbsp;y)))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($<-&nbsp;'zz&nbsp;(base/with&nbsp;county-map&nbsp;'(sin&nbsp;(~rad&nbsp;y))))))</br>&nbsp;(def&nbsp;panel-3dpoly</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;z&nbsp;:rot.mat&nbsp;(diag&nbsp;4)&nbsp;distance&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;m&nbsp;(ltransform3dto3d&nbsp;(rbind&nbsp;x&nbsp;y&nbsp;z)&nbsp;rot.mat&nbsp;distance))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(panel.polygon&nbsp;:x&nbsp;(bra&nbsp;m&nbsp;1&nbsp;nil)&nbsp;:y&nbsp;(bra&nbsp;m&nbsp;2&nbsp;nil)&nbsp;...))))</br>&nbsp;(def&nbsp;aspect</br>&nbsp;&nbsp;&nbsp;(base/with&nbsp;county-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'[(diff&nbsp;(range&nbsp;yy&nbsp;:na.rm&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/&nbsp;(diff&nbsp;(range&nbsp;zz&nbsp;:na.rm&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(diff&nbsp;(range&nbsp;xx&nbsp;:na.rm&nbsp;true)))]))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"13.9.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;zz&nbsp;(*&nbsp;xx&nbsp;yy))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/cloud</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;county-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:par.box&nbsp;{:col&nbsp;"grey"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;aspect</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.aspect&nbsp;0.6</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lwd&nbsp;0.2</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:panel.3d.cloud&nbsp;panel-3dpoly</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;(r/bra&nbsp;colors&nbsp;modal-ancestry)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:screen&nbsp;{:z&nbsp;10,&nbsp;:x&nbsp;-30}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:key&nbsp;{:text&nbsp;[:!list&nbsp;(base/levels&nbsp;modal-ancestry)&nbsp;:adj&nbsp;1],</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:rectangles&nbsp;{:col&nbsp;colors},</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:space&nbsp;"top",</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:columns&nbsp;4}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zoom&nbsp;1.1</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:ylab&nbsp;nil</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:zlab&nbsp;nil))</br>&nbsp;&nbsp;&nbsp;:width</br>&nbsp;&nbsp;&nbsp;600)</code></div></div><div class="nspbox"><image src="13.9.png"></image></div><div class="nspbox"><div><h3>Figure 13.10</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;rng</br>&nbsp;&nbsp;&nbsp;(base/with&nbsp;late/USCancerRates</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'(range&nbsp;rate.male&nbsp;rate.female&nbsp;:finite&nbsp;true)))</br>&nbsp;(def&nbsp;nbreaks&nbsp;50)</br>&nbsp;(def&nbsp;breaks&nbsp;(base/exp&nbsp;(lat/do-breaks&nbsp;(base/log&nbsp;rng)&nbsp;nbreaks)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file</br>&nbsp;&nbsp;&nbsp;(str&nbsp;target-path&nbsp;"13.10.png")</br>&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;(rownames&nbsp;USCancerRates)&nbsp;(+&nbsp;rate.male&nbsp;rate.female))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(late/mapplot</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:data&nbsp;late/USCancerRates</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:breaks&nbsp;breaks</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:scales&nbsp;{:draw&nbsp;false}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:xlab&nbsp;""</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:map&nbsp;(r.maps/map&nbsp;"county"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:plot&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:fill&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:projection&nbsp;"tetra")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:main&nbsp;"Average&nbsp;yearly&nbsp;deaths&nbsp;due&nbsp;to&nbsp;cancer&nbsp;per&nbsp;100000")))</code></div></div><div class="nspbox"><image src="13.10.png"></image></div><div class="nspbox"><a id="Chapter-14"> </a><div><p>Chapter 14</p></div></div><div class="nspbox"><div><h3>Figure 14.1</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"14.1.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;sunspot-year</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:aspect&nbsp;"xy"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip&nbsp;false</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:strip.left&nbsp;true</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:cut&nbsp;{:number&nbsp;4,&nbsp;:overlap&nbsp;0.05}))</code></div></div><div class="nspbox"><image src="14.1.png"></image></div><div class="nspbox"><div><h3>Figure 14.2</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;ssd</br>&nbsp;&nbsp;&nbsp;(->&nbsp;late/biocAccess</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($&nbsp;'counts)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r/bra&nbsp;(r/colon&nbsp;1&nbsp;(*&nbsp;24&nbsp;30&nbsp;2)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/ts&nbsp;:frequency&nbsp;24)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stats/stl&nbsp;"periodic")))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"14.2.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(lat/xyplot&nbsp;ssd&nbsp;:xlab&nbsp;"Time&nbsp;(Days)"))</code></div></div><div class="nspbox"><image src="14.2.png"></image></div><div class="nspbox"><div><h3>Figure 14.3</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r/data&nbsp;:GvHD&nbsp;"flowCore")</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"14.3.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Visit&nbsp;(|&nbsp;~(symbol&nbsp;"`FSC-H`")&nbsp;Patient))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r.flowViz/densityplot&nbsp;:data&nbsp;GvHD)))</code></div></div><div class="nspbox"><image src="14.3.png"></image></div><div class="nspbox"><div><h3>Figure 14.4</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(r/data&nbsp;'NHANES&nbsp;"hexbin")</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"14.4.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->&nbsp;'(formula&nbsp;Hemoglobin&nbsp;(|&nbsp;TIBC&nbsp;Sex))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(r.hexbin/hexbinplot&nbsp;:data&nbsp;NHANES)))</code></div></div><div class="nspbox"><image src="14.4.png"></image></div><div class="nspbox"><div><h3>Figure 14.5</h3></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;panel-piechart</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[x&nbsp;y&nbsp;:labels&nbsp;(as.character&nbsp;y)&nbsp;:edges&nbsp;200&nbsp;:radius&nbsp;0.8&nbsp;:clockwise</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;false&nbsp;:init.angle&nbsp;(if&nbsp;clockwise&nbsp;90&nbsp;0)&nbsp;:density&nbsp;nil&nbsp;:angle&nbsp;45</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;superpose.polygon$col&nbsp;:border&nbsp;superpose.polygon$border</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;superpose.polygon$lty&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stopifnot&nbsp;(require&nbsp;"gridBase"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;superpose.polygon&nbsp;(trellis.par.get&nbsp;"superpose.polygon"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;opar&nbsp;(par&nbsp;:no.readonly&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(on.exit&nbsp;(par&nbsp;opar))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;(>&nbsp;(panel.number)&nbsp;1)&nbsp;(par&nbsp;:new&nbsp;true))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(par&nbsp;:fig&nbsp;(gridFIG)&nbsp;:omi&nbsp;[0&nbsp;0&nbsp;0&nbsp;0]&nbsp;:mai&nbsp;[0&nbsp;0&nbsp;0&nbsp;0])</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(pie&nbsp;(as.numeric&nbsp;x)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:labels&nbsp;labels</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:edges&nbsp;edges</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:radius&nbsp;radius</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:clockwise&nbsp;clockwise</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:init.angle&nbsp;init.angle</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:angle&nbsp;angle</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:density&nbsp;density</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:col&nbsp;col</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:border&nbsp;border</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:lty&nbsp;lty))))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(def&nbsp;piechart</br>&nbsp;&nbsp;&nbsp;(r&nbsp;'(function&nbsp;[x&nbsp;:data&nbsp;nil&nbsp;:panel&nbsp;~panel-piechart&nbsp;...]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ocall&nbsp;(sys.call&nbsp;(sys.parent)))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(brabra<-&nbsp;ocall&nbsp;1&nbsp;:value&nbsp;(quote&nbsp;piechart))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ccall&nbsp;(match.call))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ccall$data&nbsp;data)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ccall$panel&nbsp;panel)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ccall$default.scales&nbsp;{:draw&nbsp;false})</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(brabra<-&nbsp;ccall&nbsp;1&nbsp;:value&nbsp;(quote&nbsp;barchart))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ans&nbsp;(eval.parent&nbsp;ccall))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<-&nbsp;ans$call&nbsp;ocall)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ans)))</code></div></div><div class="nspbox"><div class="nspin"><code class="prettyprint lang-clj">(plot->file&nbsp;(str&nbsp;target-path&nbsp;"14.5.png")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(do&nbsp;(g/par&nbsp;:new&nbsp;true)</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(piechart&nbsp;VADeaths&nbsp;:groups&nbsp;false&nbsp;:xlab&nbsp;"")))</code></div></div><div class="nspbox"><image src="14.5.png"></image></div><hr /><div><i><small><a href="https://github.com/scicloj/clojisr-examples/tree/master/src/clojisr_examples/lattice.clj">clojisr-examples.lattice</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Sun Apr 12 21:50:49 CEST 2020.</small></i><hr /></div></div></body></html></html>